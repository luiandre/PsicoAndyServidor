(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{E5tf:function(t,e,i){"use strict";i.r(e),i.d(e,"ChildRoutesModule",(function(){return xa}));var a=i("tyNb"),o=i("fXoL"),n=i("on2l");let r=(()=>{class t{constructor(t,e){this.usuarioService=t,this.router=e}canActivate(t,e){return"PROF_ROL"===this.usuarioService.rol||"ADMIN_ROL"===this.usuarioService.rol||(this.router.navigateByUrl("/inicio"),!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(n.a),o.Rb(a.c))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),s=(()=>{class t{constructor(t,e){this.usuarioService=t,this.router=e}canActivate(t,e){return"ADMIN_ROL"===this.usuarioService.rol||(this.router.navigateByUrl("/inicio"),!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(n.a),o.Rb(a.c))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var c=i("AytR"),l=i("gFX4"),d=i("CiS3"),b=i("ofXK"),u=i("fAHl");const h=function(){return{newWindow:!0}};function m(t,e){if(1&t&&(o.Nb(0,"div",3),o.Nb(1,"div",4),o.Nb(2,"div",5),o.Nb(3,"h5",6),o.nc(4),o.Mb(),o.Nb(5,"div",7),o.Lb(6,"p",8),o.Yb(7,"linky"),o.Nb(8,"span",9),o.nc(9),o.Yb(10,"date"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){const t=e.$implicit;o.zb(4),o.pc(" ",t.titulo,""),o.zb(2),o.bc("innerHTML",o.Zb(7,3,t.detalle,o.dc(9,h)),o.jc),o.zb(3),o.oc(o.Zb(10,6,t.fecha,"short"))}}function f(t,e){if(1&t&&(o.Nb(0,"div",10),o.Nb(1,"div",11),o.Nb(2,"div",5),o.Nb(3,"div",7),o.Lb(4,"img",12),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.comunicados.length>0)}}function p(t,e){1&t&&(o.Nb(0,"div",13),o.Nb(1,"div",11),o.Nb(2,"div",14),o.Nb(3,"h4",15),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",16),o.Lb(6,"p",17),o.Mb(),o.Mb(),o.Mb())}const g=c.a.socket_url;let v=(()=>{class t{constructor(t,e){this.comunicadoService=t,this.usuarioService=e,this.comunicados=[],this.socket=l(g),this.cargando=!0}ngOnInit(){this.cargarComunicados(),this.socket.on("nuevo-comunicado",(function(t){this.cargarComunicados()}).bind(this))}cargarComunicados(){"USER_ROL"!==this.usuarioService.rol&&this.usuarioService.uid&&(this.cargando=!0,this.comunicados=[],this.comunicadoService.cargarComunicados().subscribe(t=>{this.comunicados=t.comunicado,this.cargando=!1}))}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(d.a),o.Kb(n.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-dashboard"]],decls:3,vars:3,consts:[["class","card mb-3",4,"ngFor","ngForOf"],["class","row",3,"hidden",4,"ngIf"],["class","row animate fadeIn fast",4,"ngIf"],[1,"card","mb-3"],[2,"padding","10px"],[1,"card"],[1,"card-header","text-justify",2,"background-color","#007bff","color","white"],[1,"card-body"],[1,"card-text","text-justify",3,"innerHTML"],[1,"text-muted"],[1,"row",3,"hidden"],[1,"col-12"],["src","../../../assets/images/imagenPsicoDashboard.png",1,"img-responsive"],[1,"row","animate","fadeIn","fast"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"]],template:function(t,e){1&t&&(o.mc(0,m,11,10,"div",0),o.mc(1,f,5,1,"div",1),o.mc(2,p,7,0,"div",2)),2&t&&(o.bc("ngForOf",e.comunicados),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("ngIf",e.cargando))},directives:[b.i,b.j],pipes:[u.b,b.d],encapsulation:2}),t})();var N=i("PSD3"),M=i.n(N),x=i("quSY");class w extends x.a{constructor(t,e){super()}schedule(t,e=0){return this}}class y extends w{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(a,this.id,e),this}requestAsyncId(t,e,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,a=void 0;try{this.work(t)}catch(o){i=!0,a=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),a}_unsubscribe(){const t=this.id,e=this.scheduler,i=e.actions,a=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==a&&i.splice(a,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let S=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(t,e=0,i){return new this.SchedulerAction(this,t).schedule(i,e)}}return t.now=()=>Date.now(),t})();class C extends S{constructor(t,e=S.now){super(t,()=>C.delegate&&C.delegate!==this?C.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,i){return C.delegate&&C.delegate!==this?C.delegate.schedule(t,e,i):super.schedule(t,e,i)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const L=new C(y);var O=i("7o/Q"),I=i("EY2u"),E=i("LRne"),k=i("HDdC");let A=(()=>{class t{constructor(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}}accept(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)}toObservable(){switch(this.kind){case"N":return Object(E.a)(this.value);case"E":return t=this.error,new k.a(e=>e.error(t));case"C":return Object(I.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function z(t,e=L){var i;const a=(i=t)instanceof Date&&!isNaN(+i)?+t-e.now():Math.abs(t);return t=>t.lift(new j(a,e))}class j{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new R(t,this.delay,this.scheduler))}}class R extends O.a{constructor(t,e,i){super(t),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,i=e.queue,a=t.scheduler,o=t.destination;for(;i.length>0&&i[0].time-a.now()<=0;)i.shift().notification.observe(o);if(i.length>0){const e=Math.max(0,i[0].time-a.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(R.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,i=new T(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(A.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(A.createComplete()),this.unsubscribe()}}class T{constructor(t,e){this.time=t,this.notification=e}}var P=i("SKeb"),F=i("XbMK"),D=i("3Pt+");function _(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",8),o.Nb(3,"h4",9),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",10),o.Lb(6,"p",11),o.Mb(),o.Mb(),o.Mb())}function B(t,e){if(1&t&&(o.Nb(0,"div",12),o.Nb(1,"div",1),o.Nb(2,"div",13),o.Nb(3,"h4",9),o.nc(4,"Sin resultados"),o.Mb(),o.Lb(5,"i",14),o.Lb(6,"p",11),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.totalUsuarios>0)}}function V(t,e){1&t&&(o.Nb(0,"span",33),o.nc(1,"Activo"),o.Mb())}function q(t,e){1&t&&(o.Nb(0,"span",34),o.nc(1,"Inactivo"),o.Mb())}function U(t,e){if(1&t){const t=o.Ob();o.Nb(0,"a",35),o.Vb("click",(function(){o.ic(t);const e=o.Xb().$implicit;return o.Xb(2).eliminarUsuario(e)})),o.Lb(1,"i",36),o.Mb()}}function H(t,e){if(1&t){const t=o.Ob();o.Nb(0,"a",37),o.Vb("click",(function(){o.ic(t);const e=o.Xb().$implicit;return o.Xb(2).habilitarUsuario(e)})),o.Lb(1,"i",38),o.Mb()}}function $(t,e){if(1&t){const t=o.Ob();o.Nb(0,"tr"),o.Nb(1,"td"),o.nc(2),o.Mb(),o.Nb(3,"td"),o.nc(4),o.Mb(),o.Nb(5,"td"),o.Nb(6,"select",22),o.Vb("ngModelChange",(function(i){return o.ic(t),e.$implicit.rol=i}))("change",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).cambiarRol(i)})),o.Nb(7,"option",23),o.nc(8,"Administrador"),o.Mb(),o.Nb(9,"option",24),o.nc(10,"Profesional"),o.Mb(),o.Nb(11,"option",25),o.nc(12,"Usuario"),o.Mb(),o.Mb(),o.Mb(),o.Nb(13,"td"),o.mc(14,V,2,0,"span",26),o.mc(15,q,2,0,"span",27),o.Mb(),o.Nb(16,"td",28),o.Nb(17,"a",29),o.Vb("click",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).abrirModal(i)})),o.Lb(18,"i",30),o.Mb(),o.nc(19," \xa0 "),o.mc(20,U,2,0,"a",31),o.mc(21,H,2,0,"a",32),o.Mb(),o.Mb()}if(2&t){const t=e.$implicit;o.zb(2),o.oc(t.nombre+" "+t.apellido),o.zb(2),o.oc(t.email),o.zb(2),o.bc("ngModel",t.rol),o.zb(8),o.bc("ngIf",t.activo),o.zb(1),o.bc("ngIf",!t.activo),o.zb(5),o.bc("ngIf",t.activo),o.zb(1),o.bc("ngIf",!t.activo)}}function X(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div"),o.Nb(1,"button",39),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(-6)})),o.nc(2,"Anterior"),o.Mb(),o.nc(3," \xa0 "),o.Nb(4,"button",39),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(6)})),o.nc(5,"Siguiente"),o.Mb(),o.Nb(6,"div",40),o.nc(7),o.Mb(),o.Mb()}if(2&t){const t=o.Xb(2);o.zb(1),o.bc("disabled",0===t.desde),o.zb(3),o.bc("disabled",t.hasta===t.totalUsuarios),o.zb(3),o.rc(" ",t.desde+1,"-",t.hasta," (",t.totalUsuarios,") ")}}function G(t,e){if(1&t&&(o.Nb(0,"div",12),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"div",15),o.Nb(5,"table",16),o.Nb(6,"thead"),o.Nb(7,"tr"),o.Nb(8,"th"),o.nc(9,"Nombres"),o.Mb(),o.Nb(10,"th"),o.nc(11,"Email"),o.Mb(),o.Nb(12,"th",17),o.nc(13,"Rol"),o.Mb(),o.Nb(14,"th",18),o.nc(15,"Estado"),o.Mb(),o.Nb(16,"th",19),o.nc(17,"Acciones"),o.Mb(),o.Mb(),o.Mb(),o.Nb(18,"tbody"),o.mc(19,$,22,7,"tr",20),o.Mb(),o.Mb(),o.mc(20,X,8,5,"div",21),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb(),e=o.gc(5);o.bc("hidden",0===t.totalUsuarios),o.zb(19),o.bc("ngForOf",t.usuarios),o.zb(1),o.bc("ngIf",0===e.value.length)}}const K=c.a.socket_url;let W=(()=>{class t{constructor(t,e,i){this.usuarioService=t,this.busquedaService=e,this.modalImagenService=i,this.totalUsuarios=0,this.desde=0,this.hasta=6,this.cargando=!0,this.socket=l(K)}ngOnDestroy(){this.imgSubs.unsubscribe()}ngOnInit(){this.cargarUsuarios(),this.imgSubs=this.modalImagenService.imgActualizada.pipe(z(100)).subscribe(t=>{this.cargarUsuarios()}),this.socket.on("nuevo-usuario",(function(t){this.cargarUsuarios()}).bind(this))}cargarUsuarios(){this.cargando=!0,this.usuarioService.cargarUsuarios(this.desde).subscribe(({total:t,usuarios:e})=>{this.totalUsuarios=t,this.usuarios=e,this.usuariosTemp=e,this.cargando=!1,this.totalUsuarios<6&&(this.hasta=this.totalUsuarios)})}cambiarPagina(t){this.desde+=t,this.hasta+=t,this.desde<0?this.desde=0:this.desde>=this.totalUsuarios&&(this.desde-=t),this.hasta>this.totalUsuarios?this.hasta=this.totalUsuarios:this.hasta-this.desde<5&&(this.hasta=this.desde+6),this.cargarUsuarios()}buscarUsuario(t){if(0===t.length)return this.usuarios=this.usuariosTemp;this.busquedaService.buscar("usuarios",t).subscribe(t=>{this.usuarios=t,this.totalUsuarios=t.length})}eliminarUsuario(t){if(t.uid===this.usuarioService.uid)return M.a.fire({title:"Error!",text:"No puede inhabilitarse "+t.nombre+" "+t.apellido,icon:"error",confirmButtonText:"Aceptar"});M.a.fire({title:"\xbfEsta seguro?",text:"Inhabilitar usuario "+t.nombre+" "+t.apellido,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.usuarioService.eliminarUsuario(t).subscribe(e=>{M.a.close(),M.a.fire("Inhabilitado!","Usuario "+t.nombre+" "+t.apellido+" inhabilitado.","success"),this.socket.emit("eliminar-usuarios",t),this.cargarUsuarios()},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})}))})}habilitarUsuario(t){if(t.uid===this.usuarioService.uid)return M.a.fire({title:"Error!",text:"No puede habilitarse "+t.nombre+" "+t.apellido,icon:"error",confirmButtonText:"Aceptar"});M.a.fire({title:"\xbfEsta seguro?",text:"Habilitar usuario "+t.nombre+" "+t.apellido,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.usuarioService.habilitarUsuario(t).subscribe(e=>{M.a.close(),M.a.fire("Habilitado!","Usuario "+t.nombre+" "+t.apellido+" habilitado.","success"),this.cargarUsuarios()},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})}))})}cambiarRol(t){if(t.uid===this.usuarioService.uid)return M.a.fire({title:"Error!",text:"No puede cambiar su rol: "+t.nombre+" "+t.apellido,icon:"error",confirmButtonText:"Aceptar"});M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.usuarioService.actualizarUsuario(t).subscribe(e=>{M.a.close(),M.a.fire("Exito!",t.nombre+" "+t.apellido+" ha cambiado de rol ","success")},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}abrirModal(t){this.modalImagenService.abrirModal("usuarios",t.uid,t.img)}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(n.a),o.Kb(P.a),o.Kb(F.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-usuarios"]],decls:9,vars:3,consts:[[1,"row","animate","fadeIn","fast"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar usuario por nombre o apellido",1,"form-control",3,"keyup"],["txtTermino",""],["class","row animate fadeIn fast",4,"ngIf"],["class","row animate fadeIn fast",3,"hidden",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row","animate","fadeIn","fast",3,"hidden"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-warning","fa-2x"],[1,"table-responsive"],[1,"table","table-striped"],[1,"w200"],[1,"w100"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","ADMIN_ROL"],["value","PROF_ROL"],["value","USER_ROL"],["class","label label-success",4,"ngIf"],["class","label label-danger",4,"ngIf"],[1,"text-nowrap","text-center"],["title","Cambiar imagen",3,"click"],[1,"fa","fa-image","cursor"],["title","Inhabilitar",3,"click",4,"ngIf"],["title","Habilitar",3,"click",4,"ngIf"],[1,"label","label-success"],[1,"label","label-danger"],["title","Inhabilitar",3,"click"],[1,"fa","fa-close","text-danger","cursor"],["title","Habilitar",3,"click"],[1,"fa","fa-check","text-success","cursor"],[1,"btn","btn-info",3,"disabled","click"],[1,"float-right"]],template:function(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"input",4,5),o.Vb("keyup",(function(){o.ic(t);const i=o.gc(5);return e.buscarUsuario(i.value)})),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.mc(6,_,7,0,"div",6),o.mc(7,B,7,1,"div",7),o.mc(8,G,21,3,"div",7)}2&t&&(o.zb(6),o.bc("ngIf",e.cargando),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("ngIf",!e.cargando))},directives:[b.j,b.i,D.o,D.g,D.j,D.k,D.q],encapsulation:2}),t})();var Y=i("mTOY");function Z(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",10),o.Nb(3,"h4",11),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",12),o.Lb(6,"p",13),o.Mb(),o.Mb(),o.Mb())}function J(t,e){if(1&t&&(o.Nb(0,"div",14),o.Nb(1,"div",1),o.Nb(2,"div",15),o.Nb(3,"h4",11),o.nc(4,"Sin resultados"),o.Mb(),o.Lb(5,"i",16),o.Lb(6,"p",13),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.totalNoticias>0)}}const Q=function(t){return["/dashboard/noticias/",t]};function tt(t,e){if(1&t){const t=o.Ob();o.Nb(0,"tr"),o.Nb(1,"td"),o.nc(2),o.Mb(),o.Nb(3,"td"),o.nc(4),o.Yb(5,"date"),o.Mb(),o.Nb(6,"td"),o.nc(7),o.Mb(),o.Nb(8,"td",23),o.Nb(9,"a",24),o.Vb("click",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).abrirModal(i)})),o.Lb(10,"i",25),o.Mb(),o.nc(11," \xa0 "),o.Nb(12,"a",26),o.Lb(13,"i",27),o.Mb(),o.nc(14," \xa0 "),o.Nb(15,"a",28),o.Vb("click",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).eliminarNoticia(i)})),o.Lb(16,"i",29),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=e.$implicit;o.zb(2),o.oc(t.titulo),o.zb(2),o.oc(o.Zb(5,4,t.fecha,"short")),o.zb(3),o.oc(t.usuario.nombre+" "+t.usuario.apellido),o.zb(5),o.bc("routerLink",o.ec(7,Q,t.id))}}function et(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div"),o.Nb(1,"button",30),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(-6)})),o.nc(2,"Anterior"),o.Mb(),o.nc(3," \xa0 "),o.Nb(4,"button",30),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(6)})),o.nc(5,"Siguiente"),o.Mb(),o.Nb(6,"div",31),o.nc(7),o.Mb(),o.Mb()}if(2&t){const t=o.Xb(2);o.zb(1),o.bc("disabled",0===t.desde),o.zb(3),o.bc("disabled",t.hasta===t.totalNoticias),o.zb(3),o.rc(" ",t.desde+1,"-",t.hasta," (",t.totalNoticias,") ")}}function it(t,e){if(1&t&&(o.Nb(0,"div",14),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"div",17),o.Nb(5,"table",18),o.Nb(6,"thead"),o.Nb(7,"tr"),o.Nb(8,"th",19),o.nc(9,"T\xedtulo"),o.Mb(),o.Nb(10,"th"),o.nc(11,"Fecha"),o.Mb(),o.Nb(12,"th"),o.nc(13,"Creado por"),o.Mb(),o.Nb(14,"th",20),o.nc(15,"Acciones"),o.Mb(),o.Mb(),o.Mb(),o.Nb(16,"tbody"),o.mc(17,tt,17,9,"tr",21),o.Mb(),o.Mb(),o.mc(18,et,8,5,"div",22),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb(),e=o.gc(5);o.bc("hidden",0===t.totalNoticias),o.zb(17),o.bc("ngForOf",t.noticias),o.zb(1),o.bc("ngIf",0===e.value.length)}}const at=c.a.socket_url;let ot=(()=>{class t{constructor(t,e,i){this.noticiaService=t,this.modalImagenService=e,this.busquedaService=i,this.totalNoticias=0,this.desde=0,this.hasta=6,this.cargando=!0,this.socket=l(at)}ngOnDestroy(){this.imgSubs.unsubscribe()}ngOnInit(){this.cargarNoticias(),this.imgSubs=this.modalImagenService.imgActualizada.pipe(z(100)).subscribe(t=>this.cargarNoticias())}cargarNoticias(){this.cargando=!0,this.noticiaService.cargarNoticias(this.desde).subscribe(({total:t,noticias:e})=>{this.totalNoticias=t,this.noticias=e,this.noticiasTemp=e,this.cargando=!1,this.totalNoticias<6&&(this.hasta=this.totalNoticias)})}cambiarPagina(t){this.desde+=t,this.hasta+=t,this.desde<0?this.desde=0:this.desde>=this.totalNoticias&&(this.desde-=t),this.hasta>this.totalNoticias?this.hasta=this.totalNoticias:this.hasta-this.desde<5&&(this.hasta=this.desde+6),this.cargarNoticias()}buscarNoticia(t){if(0===t.length)return this.noticias=this.noticiasTemp;this.busquedaService.buscar("noticias",t).subscribe(t=>{this.noticias=t,this.totalNoticias=t.length})}eliminarNoticia(t){M.a.fire({title:"\xbfEstas seguro?",text:"Eliminar noticia "+t.titulo,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.noticiaService.eliminarNoticia(t.id).subscribe(e=>{M.a.close(),M.a.fire("Exito!","Noticia "+t.titulo+" eliminada.","success"),this.socket.emit("guardar-noticia",e),this.cargarNoticias()},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})}))})}abrirModal(t){this.modalImagenService.abrirModal("noticias",t.id,t.img)}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(Y.a),o.Kb(F.a),o.Kb(P.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-noticias"]],decls:14,vars:3,consts:[[1,"row","animate","fadeIn","fast"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar noticia por t\xedtulo",1,"form-control",3,"keyup"],["txtTermino",""],[1,"row","animate","fadeIn","fast","text-right"],["routerLink","/dashboard/noticias/nuevo",1,"btn","btn-success"],["class","row animate fadeIn fast",4,"ngIf"],["class","row animate fadeIn fast",3,"hidden",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row","animate","fadeIn","fast",3,"hidden"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-warning","fa-2x"],[1,"table-responsive"],[1,"table","table-striped"],[1,"w200"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-nowrap","text-center"],["title","Cambiar imagen",3,"click"],[1,"fa","fa-image","cursor"],["title","Editar",3,"routerLink"],[1,"fa","fa-edit","cursor"],["title","Eliminar",3,"click"],[1,"fa","fa-close","text-danger","cursor"],[1,"btn","btn-info",3,"disabled","click"],[1,"float-right"]],template:function(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"input",4,5),o.Vb("keyup",(function(){o.ic(t);const i=o.gc(5);return e.buscarNoticia(i.value)})),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(6,"div",6),o.Nb(7,"div",1),o.Nb(8,"button",7),o.nc(9,"Agregar Noticia"),o.Mb(),o.Mb(),o.Mb(),o.Lb(10,"br"),o.mc(11,Z,7,0,"div",8),o.mc(12,J,7,1,"div",9),o.mc(13,it,19,3,"div",9)}2&t&&(o.zb(11),o.bc("ngIf",e.cargando),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("ngIf",!e.cargando))},directives:[a.d,b.j,b.i,a.f],pipes:[b.d],encapsulation:2}),t})();var nt=i("ZkmI");function rt(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",10),o.Nb(3,"h4",11),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",12),o.Lb(6,"p",13),o.Mb(),o.Mb(),o.Mb())}function st(t,e){if(1&t&&(o.Nb(0,"div",14),o.Nb(1,"div",1),o.Nb(2,"div",15),o.Nb(3,"h4",11),o.nc(4,"Sin resultados"),o.Mb(),o.Lb(5,"i",16),o.Lb(6,"p",13),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.totalServicios>0)}}const ct=function(t){return["/dashboard/servicios/",t]};function lt(t,e){if(1&t){const t=o.Ob();o.Nb(0,"tr"),o.Nb(1,"td"),o.nc(2),o.Mb(),o.Nb(3,"td"),o.nc(4),o.Yb(5,"date"),o.Mb(),o.Nb(6,"td"),o.nc(7),o.Mb(),o.Nb(8,"td"),o.nc(9),o.Mb(),o.Nb(10,"td",23),o.Nb(11,"a",24),o.Vb("click",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).abrirModal(i)})),o.Lb(12,"i",25),o.Mb(),o.nc(13," \xa0 "),o.Nb(14,"a",26),o.Lb(15,"i",27),o.Mb(),o.nc(16," \xa0 "),o.Nb(17,"a",28),o.Vb("click",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).eliminarNoticia(i)})),o.Lb(18,"i",29),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=e.$implicit;o.zb(2),o.oc(t.titulo),o.zb(2),o.oc(o.Zb(5,5,t.fecha,"short")),o.zb(3),o.oc(t.responsable.nombre+" "+t.responsable.apellido),o.zb(2),o.oc(t.usuario.nombre+" "+t.usuario.apellido),o.zb(5),o.bc("routerLink",o.ec(8,ct,t.id))}}function dt(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div"),o.Nb(1,"button",30),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(-6)})),o.nc(2,"Anterior"),o.Mb(),o.nc(3," \xa0 "),o.Nb(4,"button",30),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(6)})),o.nc(5,"Siguiente"),o.Mb(),o.Nb(6,"div",31),o.nc(7),o.Mb(),o.Mb()}if(2&t){const t=o.Xb(2);o.zb(1),o.bc("disabled",0===t.desde),o.zb(3),o.bc("disabled",t.hasta===t.totalServicios),o.zb(3),o.rc(" ",t.desde+1,"-",t.hasta," (",t.totalServicios,") ")}}function bt(t,e){if(1&t&&(o.Nb(0,"div",14),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"div",17),o.Nb(5,"table",18),o.Nb(6,"thead"),o.Nb(7,"tr"),o.Nb(8,"th"),o.nc(9,"T\xedtulo"),o.Mb(),o.Nb(10,"th",19),o.nc(11,"Fecha"),o.Mb(),o.Nb(12,"th",19),o.nc(13,"Responsable"),o.Mb(),o.Nb(14,"th",19),o.nc(15,"Creado por"),o.Mb(),o.Nb(16,"th",20),o.nc(17,"Acciones"),o.Mb(),o.Mb(),o.Mb(),o.Nb(18,"tbody"),o.mc(19,lt,19,10,"tr",21),o.Mb(),o.Mb(),o.mc(20,dt,8,5,"div",22),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb(),e=o.gc(5);o.bc("hidden",0===t.totalServicios),o.zb(19),o.bc("ngForOf",t.servicios),o.zb(1),o.bc("ngIf",0===e.value.length)}}let ut=(()=>{class t{constructor(t,e,i){this.busquedaService=t,this.modalImagenService=e,this.servicioService=i,this.totalServicios=0,this.desde=0,this.hasta=6,this.cargando=!0}ngOnDestroy(){this.imgSubs.unsubscribe()}ngOnInit(){this.cargarServicios(),this.imgSubs=this.modalImagenService.imgActualizada.pipe(z(100)).subscribe(t=>this.cargarServicios())}cargarServicios(){this.cargando=!0,this.servicioService.cargarServicios(this.desde).subscribe(({total:t,servicios:e})=>{this.totalServicios=t,this.servicios=e,this.serviciosTemp=e,this.cargando=!1,this.totalServicios<6&&(this.hasta=this.totalServicios)})}buscarServicio(t){if(0===t.length)return this.servicios=this.serviciosTemp;this.busquedaService.buscar("servicios",t).subscribe(t=>{this.servicios=t,this.totalServicios=t.length})}abrirModal(t){this.modalImagenService.abrirModal("servicios",t.id,t.img)}eliminarNoticia(t){M.a.fire({title:"\xbfEstas seguro?",text:"Eliminar servicio "+t.titulo,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.servicioService.eliminarServicio(t.id).subscribe(e=>{M.a.close(),M.a.fire("Exito!","Noticia "+t.titulo+" eliminada.","success"),this.cargarServicios()},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})}))})}cambiarPagina(t){this.desde+=t,this.hasta+=t,this.desde<0?this.desde=0:this.desde>=this.totalServicios&&(this.desde-=t),this.hasta>this.totalServicios?this.hasta=this.totalServicios:this.hasta-this.desde<5&&(this.hasta=this.desde+6),this.cargarServicios()}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(P.a),o.Kb(F.a),o.Kb(nt.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-servicios"]],decls:14,vars:3,consts:[[1,"row","animate","fadeIn","fast"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar servicios por t\xedtulo",1,"form-control",3,"keyup"],["txtTermino",""],[1,"row","animate","fadeIn","fast","text-right"],["routerLink","/dashboard/servicios/nuevo",1,"btn","btn-success"],["class","row animate fadeIn fast",4,"ngIf"],["class","row animate fadeIn fast",3,"hidden",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row","animate","fadeIn","fast",3,"hidden"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-warning","fa-2x"],[1,"table-responsive"],[1,"table","table-striped"],[1,"w200"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-nowrap","text-center"],["title","Cambiar imagen",3,"click"],[1,"fa","fa-image","cursor"],["title","Editar",3,"routerLink"],[1,"fa","fa-edit","cursor"],["title","Eliminar",3,"click"],[1,"fa","fa-close","text-danger","cursor"],[1,"btn","btn-info",3,"disabled","click"],[1,"float-right"]],template:function(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"input",4,5),o.Vb("keyup",(function(){o.ic(t);const i=o.gc(5);return e.buscarServicio(i.value)})),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(6,"div",6),o.Nb(7,"div",1),o.Nb(8,"button",7),o.nc(9,"Agregar Servicio"),o.Mb(),o.Mb(),o.Mb(),o.Lb(10,"br"),o.mc(11,rt,7,0,"div",8),o.mc(12,st,7,1,"div",9),o.mc(13,bt,21,3,"div",9)}2&t&&(o.zb(11),o.bc("ngIf",e.cargando),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("ngIf",!e.cargando))},directives:[a.d,b.j,b.i,a.f],pipes:[b.d],encapsulation:2}),t})();var ht=i("0CBe");function mt(t,e){if(1&t&&(o.Nb(0,"div",15),o.Nb(1,"div",2),o.Nb(2,"div",3),o.Nb(3,"div",6),o.Nb(4,"div",7),o.Nb(5,"div",8),o.Lb(6,"img",16),o.Yb(7,"imagen"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.zb(6),o.bc("src",o.Zb(7,1,t.noticiaSeleccionada.img,"noticias"),o.kc)}}function ft(t,e){1&t&&(o.Nb(0,"span",17),o.nc(1,"El t\xedtulo es obligatorio, hasta 100 caracteres"),o.Mb())}function pt(t,e){1&t&&(o.Nb(0,"span",17),o.nc(1,"El detalle es obligatorio, hasta 500 caracteres"),o.Mb())}const gt=c.a.socket_url;let vt=(()=>{class t{constructor(t,e,i,a,o){this.activatedRoute=t,this.fb=e,this.noticiasService=i,this.router=a,this.usuarioService=o,this.formSubmitted=!1,this.socket=l(gt)}ngOnInit(){this.activatedRoute.params.subscribe(({id:t})=>{this.cargarNoticia(t)}),this.noticiaForm=this.fb.group({titulo:["",[D.p.required,D.p.min(6),D.p.maxLength(100)]],detalle:["",[D.p.required,D.p.min(10),D.p.maxLength(500)]]})}cargarNoticia(t){"nuevo"!==t&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.noticiasService.getNoticia(t).pipe(z(1e3)).subscribe(t=>{if(M.a.close(),!t)return this.router.navigateByUrl("/dashboard/noticias");const{titulo:e,detalle:i}=t;this.noticiaSeleccionada=t,this.noticiaForm.setValue({titulo:e,detalle:i})},t=>(M.a.close(),this.router.navigateByUrl("/dashboard/noticias"))))}guardarNoticia(){this.formSubmitted=!0,this.noticiaForm.invalid||(this.noticiaSeleccionada?this.actualizarNoticia():this.nuevaNoticia())}nuevaNoticia(){const t={titulo:this.noticiaForm.value.titulo,detalle:this.noticiaForm.value.detalle,fecha:(new Date).getTime(),usuario:this.usuarioService.uid,img:"no-image"};M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.noticiasService.crearNoticia(t).subscribe(t=>{M.a.close(),M.a.fire({title:"Exito!",text:"Noticia guardada",icon:"success",confirmButtonText:"Aceptar"}),this.socket.emit("guardar-noticia",t),this.router.navigateByUrl("/dashboard/noticias")},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}actualizarNoticia(){const t={titulo:this.noticiaForm.value.titulo,detalle:this.noticiaForm.value.detalle,fecha:(new Date).getTime(),usuario:this.usuarioService.uid};M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.noticiasService.actualizarNoticia(this.noticiaSeleccionada.id,t).subscribe(t=>{M.a.close(),M.a.fire({title:"Exito!",text:"Noticia actualizada",icon:"success",confirmButtonText:"Aceptar"}),this.socket.emit("guardar-noticia",t),this.router.navigateByUrl("/dashboard/noticias")},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}campoNoValido(t){return!(!this.noticiaForm.get(t).invalid||!this.formSubmitted)}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(a.a),o.Kb(D.c),o.Kb(Y.a),o.Kb(a.c),o.Kb(n.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-noticia"]],decls:28,vars:4,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"form",3,"formGroup","ngSubmit"],["class","col-12 text-center",4,"ngIf"],[1,"row","p-t-20"],[1,"col-md-12"],[1,"form-group"],[1,"control-label"],["type","text","placeholder","T\xedtulo","formControlName","titulo",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Detalle","formControlName","detalle","rows","5",1,"form-control"],["routerLink","/dashboard/noticias","type","button","data-dismiss","modal",1,"btn","btn-danger","waves-effect"],["type","submit",1,"btn","btn-success","waves-effect","waves-light"],[1,"col-12","text-center"],[1,"w200",3,"src"],[1,"text-danger"]],template:function(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"form",4),o.Vb("ngSubmit",(function(){return e.guardarNoticia()})),o.mc(5,mt,8,4,"div",5),o.Nb(6,"div",6),o.Nb(7,"div",7),o.Nb(8,"div",8),o.Nb(9,"label",9),o.nc(10,"T\xedtulo"),o.Mb(),o.Lb(11,"input",10),o.mc(12,ft,2,0,"span",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(13,"div",6),o.Nb(14,"div",7),o.Nb(15,"div",8),o.Nb(16,"label",9),o.nc(17,"Detalle"),o.Mb(),o.Lb(18,"textarea",12),o.mc(19,pt,2,0,"span",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(20,"div",6),o.Nb(21,"div",7),o.Nb(22,"div",8),o.Nb(23,"button",13),o.nc(24,"Cancelar"),o.Mb(),o.nc(25," \xa0 "),o.Nb(26,"button",14),o.nc(27,"Guardar"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.zb(4),o.bc("formGroup",e.noticiaForm),o.zb(1),o.bc("ngIf",e.noticiaSeleccionada),o.zb(7),o.bc("ngIf",e.campoNoValido("titulo")),o.zb(7),o.bc("ngIf",e.campoNoValido("detalle")))},directives:[D.r,D.h,D.e,b.j,D.b,D.g,D.d,a.d],pipes:[ht.a],encapsulation:2}),t})();function Nt(t,e){if(1&t&&(o.Nb(0,"div",19),o.Nb(1,"div",2),o.Nb(2,"div",3),o.Nb(3,"div",6),o.Nb(4,"div",7),o.Nb(5,"div",8),o.Lb(6,"img",20),o.Yb(7,"imagen"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.zb(6),o.bc("src",o.Zb(7,1,t.servicioSeleccionado.img,"servicios"),o.kc)}}function Mt(t,e){1&t&&(o.Nb(0,"span",21),o.nc(1,"El t\xedtulo es obligatorio, hasta 100 caracteres"),o.Mb())}function xt(t,e){1&t&&(o.Nb(0,"span",21),o.nc(1,"El detalle es obligatorio, hasta 500 caracteres"),o.Mb())}function wt(t,e){if(1&t&&(o.Nb(0,"option",22),o.nc(1),o.Mb()),2&t){const t=e.$implicit;o.bc("value",t.uid),o.zb(1),o.oc(t.nombre+" "+t.apellido)}}function yt(t,e){1&t&&(o.Nb(0,"span",21),o.nc(1,"Elija un responsable"),o.Mb())}function St(t,e){if(1&t&&(o.Nb(0,"div",23),o.Nb(1,"div",7),o.Nb(2,"div",8),o.Nb(3,"label",9),o.nc(4),o.Mb(),o.Lb(5,"br"),o.Lb(6,"img",24),o.Yb(7,"imagen"),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.zb(4),o.oc(t.usuarioSeleccionado.email),o.zb(2),o.bc("src",o.Zb(7,2,t.usuarioSeleccionado.img,"usuarios"),o.kc)}}let Ct=(()=>{class t{constructor(t,e,i,a,o){this.fb=t,this.usuarioService=e,this.servicioService=i,this.router=a,this.activatedRoute=o,this.usuarios=[],this.formSubmitted=!1}ngOnInit(){this.activatedRoute.params.subscribe(({id:t})=>{this.cargarServicio(t)}),this.servicioForm=this.fb.group({titulo:["",[D.p.required,D.p.min(6),D.p.maxLength(100)]],detalle:["",[D.p.required,D.p.min(10),D.p.maxLength(500)]],responsable:["",[D.p.required]]}),this.cargarUsuarios(),this.servicioForm.get("responsable").valueChanges.subscribe(t=>{this.usuarioSeleccionado=this.usuarios.find(e=>e.uid===t)})}cargarServicio(t){"nuevo"!==t&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.servicioService.getServicio(t).pipe(z(1e3)).subscribe(t=>{if(M.a.close(),!t)return this.router.navigateByUrl("/dashboard/servicios");const{titulo:e,detalle:i,responsable:{_id:a}}=t;this.servicioSeleccionado=t,this.servicioForm.setValue({titulo:e,detalle:i,responsable:a})},t=>(M.a.close(),this.router.navigateByUrl("/dashboard/servicios"))))}guardarServicio(){this.formSubmitted=!0,this.servicioForm.invalid||(this.servicioSeleccionado?this.actualizarServicio():this.nuevoServicio())}nuevoServicio(){const t={titulo:this.servicioForm.value.titulo,detalle:this.servicioForm.value.detalle,fecha:(new Date).getTime(),usuario:this.usuarioService.uid,responsable:this.servicioForm.value.responsable,img:"no-image"};M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.servicioService.crearServicio(t).subscribe(t=>{M.a.close(),M.a.fire({title:"Exito!",text:"Servicio guardado",icon:"success",confirmButtonText:"Aceptar"}),this.router.navigateByUrl("/dashboard/servicios")},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}actualizarServicio(){const t={titulo:this.servicioForm.value.titulo,detalle:this.servicioForm.value.detalle,fecha:(new Date).getTime(),usuario:this.usuarioService.uid,responsable:this.servicioForm.value.responsable};M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.servicioService.actualizarServicio(this.servicioSeleccionado.id,t).subscribe(t=>{M.a.close(),M.a.fire({title:"Exito!",text:"Servicio actualizado",icon:"success",confirmButtonText:"Aceptar"}),this.router.navigateByUrl("/dashboard/servicios")},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}campoNoValido(t){return!(!this.servicioForm.get(t).invalid||!this.formSubmitted)}cargarUsuarios(){this.usuarioService.getUsuariosAdministrativos().subscribe(t=>{this.usuarios=t})}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(D.c),o.Kb(n.a),o.Kb(nt.a),o.Kb(a.c),o.Kb(a.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-servicio"]],decls:39,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"form",3,"formGroup","ngSubmit"],["class","col-12 text-center",4,"ngIf"],[1,"row","p-t-20"],[1,"col-md-12"],[1,"form-group"],[1,"control-label"],["type","text","placeholder","T\xedtulo","formControlName","titulo",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Detalle","formControlName","detalle","rows","5",1,"form-control"],["formControlName","responsable",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","row p-t-20 text-center",4,"ngIf"],["routerLink","/dashboard/servicios","type","button","data-dismiss","modal",1,"btn","btn-danger","waves-effect"],["type","submit",1,"btn","btn-success","waves-effect","waves-light"],[1,"col-12","text-center"],[1,"w200",3,"src"],[1,"text-danger"],[3,"value"],[1,"row","p-t-20","text-center"],[1,"w100",3,"src"]],template:function(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"form",4),o.Vb("ngSubmit",(function(){return e.guardarServicio()})),o.mc(5,Nt,8,4,"div",5),o.Nb(6,"div",6),o.Nb(7,"div",7),o.Nb(8,"div",8),o.Nb(9,"label",9),o.nc(10,"T\xedtulo"),o.Mb(),o.Lb(11,"input",10),o.mc(12,Mt,2,0,"span",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(13,"div",6),o.Nb(14,"div",7),o.Nb(15,"div",8),o.Nb(16,"label",9),o.nc(17,"Detalle"),o.Mb(),o.Lb(18,"textarea",12),o.mc(19,xt,2,0,"span",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(20,"div",6),o.Nb(21,"div",7),o.Nb(22,"div",8),o.Nb(23,"label",9),o.nc(24,"Responsable"),o.Mb(),o.Nb(25,"select",13),o.Nb(26,"option",14),o.nc(27,"Seleccione un usuario"),o.Mb(),o.mc(28,wt,2,2,"option",15),o.Mb(),o.mc(29,yt,2,0,"span",11),o.Mb(),o.Mb(),o.Mb(),o.mc(30,St,8,5,"div",16),o.Nb(31,"div",6),o.Nb(32,"div",7),o.Nb(33,"div",8),o.Nb(34,"button",17),o.nc(35,"Cancelar"),o.Mb(),o.nc(36," \xa0 "),o.Nb(37,"button",18),o.nc(38,"Guardar"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.zb(4),o.bc("formGroup",e.servicioForm),o.zb(1),o.bc("ngIf",e.servicioSeleccionado),o.zb(7),o.bc("ngIf",e.campoNoValido("titulo")),o.zb(7),o.bc("ngIf",e.campoNoValido("detalle")),o.zb(9),o.bc("ngForOf",e.usuarios),o.zb(1),o.bc("ngIf",e.campoNoValido("responsable")),o.zb(1),o.bc("ngIf",e.usuarioSeleccionado))},directives:[D.r,D.h,D.e,b.j,D.b,D.g,D.d,D.o,D.k,D.q,b.i,a.d],pipes:[ht.a],encapsulation:2}),t})();function Lt(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",10),o.Nb(3,"h4",11),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",12),o.Lb(6,"p",13),o.Mb(),o.Mb(),o.Mb())}function Ot(t,e){if(1&t&&(o.Nb(0,"div",14),o.Nb(1,"div",1),o.Nb(2,"div",15),o.Nb(3,"h4",11),o.nc(4,"Sin resultados"),o.Mb(),o.Lb(5,"i",16),o.Lb(6,"p",13),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.totalComunicados>0)}}const It=function(t){return["/dashboard/comunicados/",t]};function Et(t,e){if(1&t){const t=o.Ob();o.Nb(0,"tr"),o.Nb(1,"td"),o.nc(2),o.Mb(),o.Nb(3,"td"),o.nc(4),o.Yb(5,"date"),o.Mb(),o.Nb(6,"td"),o.nc(7),o.Mb(),o.Nb(8,"td",23),o.Nb(9,"a",24),o.Lb(10,"i",25),o.Mb(),o.nc(11," \xa0 "),o.Nb(12,"a",26),o.Vb("click",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).eliminarComunicado(i)})),o.Lb(13,"i",27),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=e.$implicit;o.zb(2),o.oc(t.titulo),o.zb(2),o.oc(o.Zb(5,4,t.fecha,"short")),o.zb(3),o.oc(t.usuario.nombre+" "+t.usuario.apellido),o.zb(2),o.bc("routerLink",o.ec(7,It,t.id))}}function kt(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div"),o.Nb(1,"button",28),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(-6)})),o.nc(2,"Anterior"),o.Mb(),o.nc(3," \xa0 "),o.Nb(4,"button",28),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(6)})),o.nc(5,"Siguiente"),o.Mb(),o.Nb(6,"div",29),o.nc(7),o.Mb(),o.Mb()}if(2&t){const t=o.Xb(2);o.zb(1),o.bc("disabled",0===t.desde),o.zb(3),o.bc("disabled",t.hasta===t.totalComunicados),o.zb(3),o.rc(" ",t.desde+1,"-",t.hasta," (",t.totalComunicados,") ")}}function At(t,e){if(1&t&&(o.Nb(0,"div",14),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"div",17),o.Nb(5,"table",18),o.Nb(6,"thead"),o.Nb(7,"tr"),o.Nb(8,"th",19),o.nc(9,"T\xedtulo"),o.Mb(),o.Nb(10,"th"),o.nc(11,"Fecha"),o.Mb(),o.Nb(12,"th"),o.nc(13,"Creado por"),o.Mb(),o.Nb(14,"th",20),o.nc(15,"Acciones"),o.Mb(),o.Mb(),o.Mb(),o.Nb(16,"tbody"),o.mc(17,Et,14,9,"tr",21),o.Mb(),o.Mb(),o.mc(18,kt,8,5,"div",22),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb(),e=o.gc(5);o.bc("hidden",0===t.totalComunicados),o.zb(17),o.bc("ngForOf",t.comunicados),o.zb(1),o.bc("ngIf",0===e.value.length)}}const zt=c.a.socket_url;let jt=(()=>{class t{constructor(t,e,i){this.comunicadoService=t,this.busquedaService=e,this.usuarioService=i,this.totalComunicados=0,this.desde=0,this.hasta=6,this.cargando=!0,this.socket=l(zt)}ngOnInit(){this.cargarComunicados()}cargarComunicados(){this.cargando=!0,this.comunicadoService.cargarComunicados(this.desde).subscribe(({total:t,comunicado:e})=>{this.totalComunicados=t,this.comunicados=e,this.comunicadosTemp=e,this.cargando=!1,this.totalComunicados<6&&(this.hasta=this.totalComunicados)})}cambiarPagina(t){this.desde+=t,this.hasta+=t,this.desde<0?this.desde=0:this.desde>=this.totalComunicados&&(this.desde-=t),this.hasta>this.totalComunicados?this.hasta=this.totalComunicados:this.hasta-this.desde<5&&(this.hasta=this.desde+6),this.cargarComunicados()}buscarComunicado(t){if(0===t.length)return this.comunicados=this.comunicadosTemp;this.busquedaService.buscar("comunicados",t).subscribe(t=>{this.comunicados=t,this.totalComunicados=t.length})}eliminarComunicado(t){M.a.fire({title:"\xbfEstas seguro?",text:"Eliminar comunicado "+t.titulo,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.comunicadoService.eliminarComunicado(t.id).subscribe(e=>{M.a.close(),M.a.fire("Exito!","Comunicado "+t.titulo+" eliminado.","success"),this.socket.emit("guardar-comunicado",e),this.cargarComunicados()},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})}))})}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(d.a),o.Kb(P.a),o.Kb(n.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-comunicados"]],decls:14,vars:3,consts:[[1,"row","animate","fadeIn","fast"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar comunicados por t\xedtulo",1,"form-control",3,"keyup"],["txtTermino",""],[1,"row","animate","fadeIn","fast","text-right"],["routerLink","/dashboard/comunicados/nuevo",1,"btn","btn-success"],["class","row animate fadeIn fast",4,"ngIf"],["class","row animate fadeIn fast",3,"hidden",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row","animate","fadeIn","fast",3,"hidden"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-warning","fa-2x"],[1,"table-responsive"],[1,"table","table-striped"],[1,"w200"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-nowrap","text-center"],["title","Editar",3,"routerLink"],[1,"fa","fa-edit","cursor"],["title","Eliminar",3,"click"],[1,"fa","fa-close","text-danger","cursor"],[1,"btn","btn-info",3,"disabled","click"],[1,"float-right"]],template:function(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"input",4,5),o.Vb("keyup",(function(){o.ic(t);const i=o.gc(5);return e.buscarComunicado(i.value)})),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(6,"div",6),o.Nb(7,"div",1),o.Nb(8,"button",7),o.nc(9,"Agregar Comunicado"),o.Mb(),o.Mb(),o.Mb(),o.Lb(10,"br"),o.mc(11,Lt,7,0,"div",8),o.mc(12,Ot,7,1,"div",9),o.mc(13,At,19,3,"div",9)}2&t&&(o.zb(11),o.bc("ngIf",e.cargando),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("ngIf",!e.cargando))},directives:[a.d,b.j,b.i,a.f],pipes:[b.d],encapsulation:2}),t})();function Rt(t,e){1&t&&(o.Nb(0,"span",16),o.nc(1,"El t\xedtulo es obligatorio, hasta 100 caracteres"),o.Mb())}function Tt(t,e){1&t&&(o.Nb(0,"span",16),o.nc(1,"El detalle es obligatorio, hasta 500 caracteres"),o.Mb())}const Pt=c.a.socket_url;let Ft=(()=>{class t{constructor(t,e,i,a,o){this.activatedRoute=t,this.fb=e,this.comunicadoService=i,this.router=a,this.usuarioService=o,this.formSubmitted=!1,this.socket=l(Pt)}ngOnInit(){this.activatedRoute.params.subscribe(({id:t})=>{this.cargarComunicado(t)}),this.comunicadoForm=this.fb.group({titulo:["",[D.p.required,D.p.min(6),D.p.maxLength(100)]],detalle:["",[D.p.required,D.p.min(10),D.p.maxLength(500)]]})}cargarComunicado(t){"nuevo"!==t&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.comunicadoService.getComunicado(t).pipe(z(1e3)).subscribe(t=>{if(M.a.close(),!t)return this.router.navigateByUrl("/dashboard/comunicados");const{titulo:e,detalle:i}=t;this.comunicadoSeleccionado=t,this.comunicadoForm.setValue({titulo:e,detalle:i})},t=>(M.a.close(),this.router.navigateByUrl("/dashboard/comunicados"))))}guardarComunicado(){this.formSubmitted=!0,this.comunicadoForm.invalid||(this.comunicadoSeleccionado?this.actualizarComunicado():this.nuevoComunicado())}nuevoComunicado(){const t={titulo:this.comunicadoForm.value.titulo,detalle:this.comunicadoForm.value.detalle,fecha:(new Date).getTime(),usuario:this.usuarioService.uid};M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.comunicadoService.crearComunicado(t).subscribe(t=>{M.a.close(),M.a.fire({title:"Exito!",text:"Comunicado guardado",icon:"success",confirmButtonText:"Aceptar"}),this.socket.emit("guardar-comunicado",t),this.router.navigateByUrl("/dashboard/comunicados")},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}actualizarComunicado(){const t={titulo:this.comunicadoForm.value.titulo,detalle:this.comunicadoForm.value.detalle,fecha:(new Date).getTime(),usuario:this.usuarioService.uid};M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.comunicadoService.actualizarComunicado(this.comunicadoSeleccionado.id,t).subscribe(t=>{M.a.close(),M.a.fire({title:"Exito!",text:"Comunicado actualizado",icon:"success",confirmButtonText:"Aceptar"}),this.socket.emit("guardar-comunicados",t),this.router.navigateByUrl("/dashboard/comunicados")},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}campoNoValido(t){return!(!this.comunicadoForm.get(t).invalid||!this.formSubmitted)}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(a.a),o.Kb(D.c),o.Kb(d.a),o.Kb(a.c),o.Kb(n.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-comunicado"]],decls:26,vars:3,consts:[[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-body"],[1,"row","p-t-20"],[1,"col-md-12"],[1,"form-group"],[1,"control-label"],["type","text","placeholder","T\xedtulo","formControlName","titulo",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Detalle","formControlName","detalle","rows","5",1,"form-control"],[1,"form-actions"],["routerLink","/dashboard/comunicados","type","button","data-dismiss","modal",1,"btn","btn-danger"],["type","submit",1,"btn","btn-success"],[1,"text-danger"]],template:function(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"form",4),o.Vb("ngSubmit",(function(){return e.guardarComunicado()})),o.Nb(5,"div",5),o.Nb(6,"div",6),o.Nb(7,"div",7),o.Nb(8,"div",8),o.Nb(9,"label",9),o.nc(10,"T\xedtulo"),o.Mb(),o.Lb(11,"input",10),o.mc(12,Rt,2,0,"span",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(13,"div",6),o.Nb(14,"div",7),o.Nb(15,"div",8),o.Nb(16,"label",9),o.nc(17,"Detalle"),o.Mb(),o.Lb(18,"textarea",12),o.mc(19,Tt,2,0,"span",11),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(20,"div",13),o.Nb(21,"button",14),o.nc(22,"Cancelar"),o.Mb(),o.nc(23," \xa0 "),o.Nb(24,"button",15),o.nc(25,"Guardar"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.zb(4),o.bc("formGroup",e.comunicadoForm),o.zb(8),o.bc("ngIf",e.campoNoValido("titulo")),o.zb(7),o.bc("ngIf",e.campoNoValido("detalle")))},directives:[D.r,D.h,D.e,D.b,D.g,D.d,b.j,a.d],encapsulation:2}),t})();var Dt=i("4azi"),_t=i("lJxs"),Bt=i("tk/3");const Vt=c.a.base_url;let qt=(()=>{class t{constructor(t){this.http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}crearHistoria(t){return this.http.post(Vt+"/historias",t,this.headers)}actualizarHistoria(t,e){return this.http.put(`${Vt}/historias/${t}`,e,this.headers)}getHistoria(t){return this.http.get(`${Vt}/historias/${t}`,this.headers).pipe(Object(_t.a)(t=>t.historia))}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(Bt.a))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ut(t,e){1&t&&(o.Nb(0,"div",2),o.Nb(1,"div",3),o.Nb(2,"div",4),o.Nb(3,"h4",5),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",6),o.Lb(6,"p",7),o.Mb(),o.Mb(),o.Mb())}function Ht(t,e){if(1&t&&(o.Nb(0,"div",8),o.Nb(1,"div",3),o.Nb(2,"div",9),o.Nb(3,"h4",5),o.nc(4,"Sin resultados"),o.Mb(),o.Lb(5,"i",10),o.Lb(6,"p",7),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.totalAsignaciones>0)}}function $t(t,e){if(1&t){const t=o.Ob();o.Nb(0,"tr"),o.Nb(1,"td"),o.nc(2),o.Mb(),o.Nb(3,"td"),o.nc(4),o.Mb(),o.Nb(5,"td"),o.nc(6),o.Yb(7,"date"),o.Mb(),o.Nb(8,"td",20),o.Nb(9,"a",21),o.Vb("click",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).revisarHistoria(i)})),o.Lb(10,"i",22),o.Mb(),o.nc(11,"\xa0 "),o.Nb(12,"a",23),o.Lb(13,"i",24),o.Mb(),o.nc(14,"\xa0 "),o.Nb(15,"a",25),o.Lb(16,"i",26),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=e.$implicit;o.zb(2),o.oc(t.paciente.nombre+" "+t.paciente.apellido),o.zb(2),o.oc(t.paciente.email),o.zb(2),o.oc(o.Zb(7,5,t.fecha,"short")),o.zb(6),o.cc("routerLink","/dashboard/seguimientos/",t.paciente._id,""),o.zb(3),o.cc("routerLink","/dashboard/grafica/",t.paciente._id,"")}}function Xt(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div",8),o.Nb(1,"div",3),o.Nb(2,"div",11),o.Nb(3,"div",12),o.Nb(4,"div",13),o.Nb(5,"table",14),o.Nb(6,"thead"),o.Nb(7,"tr"),o.Nb(8,"th",15),o.nc(9,"Nombres"),o.Mb(),o.Nb(10,"th"),o.nc(11,"Email"),o.Mb(),o.Nb(12,"th"),o.nc(13,"Fecha"),o.Mb(),o.Nb(14,"th",16),o.nc(15,"Revisar"),o.Mb(),o.Mb(),o.Mb(),o.Nb(16,"tbody"),o.mc(17,$t,17,8,"tr",17),o.Mb(),o.Mb(),o.Nb(18,"div"),o.Nb(19,"button",18),o.Vb("click",(function(){return o.ic(t),o.Xb().cambiarPagina(-6)})),o.nc(20,"Anterior"),o.Mb(),o.nc(21," \xa0 "),o.Nb(22,"button",18),o.Vb("click",(function(){return o.ic(t),o.Xb().cambiarPagina(6)})),o.nc(23,"Siguiente"),o.Mb(),o.Nb(24,"div",19),o.nc(25),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=o.Xb();o.bc("hidden",0===t.totalAsignaciones),o.zb(17),o.bc("ngForOf",t.asignaciones),o.zb(2),o.bc("disabled",0===t.desde),o.zb(3),o.bc("disabled",t.hasta===t.totalAsignaciones),o.zb(3),o.rc(" ",t.desde+1,"-",t.hasta," (",t.totalAsignaciones,") ")}}const Gt=c.a.socket_url;let Kt=(()=>{class t{constructor(t,e,i,a){this.asignacionService=t,this.usuarioService=e,this.historiasService=i,this.router=a,this.totalAsignaciones=0,this.desde=0,this.hasta=6,this.cargando=!0,this.socket=l(Gt)}ngOnInit(){this.cargarAsignaciones(this.usuarioService.uid),this.socket.on("nuevo-asignacion",(function(t){t.profesional._id!==this.usuarioService.uid&&t.profesional!==this.usuarioService.uid||this.cargarAsignaciones(this.usuarioService.uid)}).bind(this))}cargarAsignaciones(t){this.cargando=!0,this.asignacionService.getAsignacionesProfesional(t,this.desde).subscribe(({total:t,asignaciones:e})=>{this.totalAsignaciones=t,this.asignaciones=e,this.cargando=!1,this.totalAsignaciones<6&&(this.hasta=this.totalAsignaciones)})}cambiarPagina(t){this.desde+=t,this.hasta+=t,this.desde<0?this.desde=0:this.desde>=this.totalAsignaciones&&(this.desde-=t),this.hasta>this.totalAsignaciones?this.hasta=this.totalAsignaciones:this.hasta-this.desde<5&&(this.hasta=this.desde+6),this.cargarAsignaciones(this.usuarioService.uid)}revisarHistoria(t){this.historiasService.getHistoria(t.paciente._id).subscribe(e=>{this.router.navigateByUrl("/dashboard/historias/"+t.paciente._id)},e=>{"Sin historia"===e.error.msg&&this.historiasService.crearHistoria({entrevistador:this.usuarioService.uid,usuario:t.paciente._id,nombres:t.paciente.nombre,apellidos:t.paciente.apellido,email:t.paciente.email}).subscribe(e=>{this.router.navigateByUrl("/dashboard/historias/"+t.paciente._id)})})}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(Dt.a),o.Kb(n.a),o.Kb(qt),o.Kb(a.c))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-historias"]],decls:3,vars:3,consts:[["class","row animate fadeIn fast",4,"ngIf"],["class","row animate fadeIn fast",3,"hidden",4,"ngIf"],[1,"row","animate","fadeIn","fast"],[1,"col-12"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row","animate","fadeIn","fast",3,"hidden"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-warning","fa-2x"],[1,"card"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[1,"w200"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[1,"btn","btn-info",3,"disabled","click"],[1,"float-right"],[1,"text-nowrap","text-center"],["title","Historia Cl\xednica",3,"click"],[1,"fa","fa-address-book-o","cursor"],["title","Seguimiento",3,"routerLink"],[1,"fa","fa-id-card-o","cursor"],["title","Resultados de test",3,"routerLink"],[1,"fa","fa-bar-chart","cursor"]],template:function(t,e){1&t&&(o.mc(0,Ut,7,0,"div",0),o.mc(1,Ht,7,1,"div",1),o.mc(2,Xt,26,7,"div",1)),2&t&&(o.bc("ngIf",e.cargando),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("ngIf",!e.cargando))},directives:[b.j,b.i,a.f],pipes:[b.d],encapsulation:2}),t})();function Wt(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",8),o.Nb(3,"h4",9),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",10),o.Lb(6,"p",11),o.Mb(),o.Mb(),o.Mb())}function Yt(t,e){if(1&t&&(o.Nb(0,"div",12),o.Nb(1,"div",1),o.Nb(2,"div",13),o.Nb(3,"h4",9),o.nc(4,"Sin resultados"),o.Mb(),o.Lb(5,"i",14),o.Lb(6,"p",11),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.totalUsuarios>0)}}function Zt(t,e){1&t&&(o.Nb(0,"span",26),o.nc(1,"Activo"),o.Mb())}function Jt(t,e){1&t&&(o.Nb(0,"span",27),o.nc(1,"Inactivo"),o.Mb())}function Qt(t,e){if(1&t&&(o.Nb(0,"tr"),o.Nb(1,"td"),o.nc(2),o.Mb(),o.Nb(3,"td"),o.nc(4),o.Mb(),o.Nb(5,"td"),o.mc(6,Zt,2,0,"span",21),o.mc(7,Jt,2,0,"span",22),o.Mb(),o.Nb(8,"td",23),o.Nb(9,"a",24),o.Lb(10,"i",25),o.Mb(),o.Mb(),o.Mb()),2&t){const t=e.$implicit;o.zb(2),o.oc(t.nombre+" "+t.apellido),o.zb(2),o.oc(t.email),o.zb(2),o.bc("ngIf",t.activo),o.zb(1),o.bc("ngIf",!t.activo),o.zb(2),o.cc("routerLink","/dashboard/asignaciones/",t.uid,"")}}function te(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div"),o.Nb(1,"button",28),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(-6)})),o.nc(2,"Anterior"),o.Mb(),o.nc(3," \xa0 "),o.Nb(4,"button",28),o.Vb("click",(function(){return o.ic(t),o.Xb(2).cambiarPagina(6)})),o.nc(5,"Siguiente"),o.Mb(),o.Nb(6,"div",29),o.nc(7),o.Mb(),o.Mb()}if(2&t){const t=o.Xb(2);o.zb(1),o.bc("disabled",0===t.desde),o.zb(3),o.bc("disabled",t.hasta===t.totalUsuarios),o.zb(3),o.rc(" ",t.desde+1,"-",t.hasta," (",t.totalUsuarios,") ")}}function ee(t,e){if(1&t&&(o.Nb(0,"div",12),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"div",15),o.Nb(5,"table",16),o.Nb(6,"thead"),o.Nb(7,"tr"),o.Nb(8,"th"),o.nc(9,"Nombres"),o.Mb(),o.Nb(10,"th"),o.nc(11,"Email"),o.Mb(),o.Nb(12,"th",17),o.nc(13,"Estado"),o.Mb(),o.Nb(14,"th",18),o.nc(15,"Asignar"),o.Mb(),o.Mb(),o.Mb(),o.Nb(16,"tbody"),o.mc(17,Qt,11,5,"tr",19),o.Mb(),o.Mb(),o.mc(18,te,8,5,"div",20),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb(),e=o.gc(5);o.bc("hidden",0===t.totalUsuarios),o.zb(17),o.bc("ngForOf",t.usuarios),o.zb(1),o.bc("ngIf",0===e.value.length)}}const ie=c.a.socket_url;let ae=(()=>{class t{constructor(t,e){this.usuarioService=t,this.busquedaService=e,this.totalUsuarios=0,this.desde=0,this.hasta=6,this.cargando=!0,this.socket=l(ie)}ngOnInit(){this.cargarUsuarios(),this.socket.on("nuevo-usuario",(function(t){this.cargarUsuarios()}).bind(this))}cargarUsuarios(){this.cargando=!0,this.usuarioService.cargarUsuariosAsignacion(this.desde).subscribe(({usuarios:t})=>{this.totalUsuarios=t.length,this.usuarios=t,this.usuariosTemp=t,this.cargando=!1,this.totalUsuarios<6&&(this.hasta=this.totalUsuarios)})}cambiarPagina(t){this.desde+=t,this.hasta+=t,this.desde<0?this.desde=0:this.desde>=this.totalUsuarios&&(this.desde-=t),this.hasta>this.totalUsuarios?this.hasta=this.totalUsuarios:this.hasta<this.totalUsuarios&&(this.hasta=6),this.cargarUsuarios()}buscarUsuario(t){if(0===t.length)return this.usuarios=this.usuariosTemp;this.busquedaService.buscar("usuarios",t).subscribe(t=>{this.usuarios=t,this.totalUsuarios=t.length})}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(n.a),o.Kb(P.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-asignaciones"]],decls:9,vars:3,consts:[[1,"row","animate","fadeIn","fast"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar usuario por nombre o apellido",1,"form-control",3,"keyup"],["txtTermino",""],["class","row animate fadeIn fast",4,"ngIf"],["class","row animate fadeIn fast",3,"hidden",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row","animate","fadeIn","fast",3,"hidden"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-warning","fa-2x"],[1,"table-responsive"],[1,"table","table-striped"],[1,"w100"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","label label-success",4,"ngIf"],["class","label label-danger",4,"ngIf"],[1,"text-nowrap","text-center"],["title","Asignar profesionales",3,"routerLink"],[1,"fa","fa-handshake-o","cursor"],[1,"label","label-success"],[1,"label","label-danger"],[1,"btn","btn-info",3,"disabled","click"],[1,"float-right"]],template:function(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"input",4,5),o.Vb("keyup",(function(){o.ic(t);const i=o.gc(5);return e.buscarUsuario(i.value)})),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.mc(6,Wt,7,0,"div",6),o.mc(7,Yt,7,1,"div",7),o.mc(8,ee,19,3,"div",7)}2&t&&(o.zb(6),o.bc("ngIf",e.cargando),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("ngIf",!e.cargando))},directives:[b.j,b.i,a.f],encapsulation:2}),t})();var oe=i("AHll");function ne(t,e){1&t&&(o.Nb(0,"div",5),o.Nb(1,"div",1),o.Nb(2,"div",6),o.Nb(3,"h4",7),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",8),o.Lb(6,"p",9),o.Mb(),o.Mb(),o.Mb())}function re(t,e){if(1&t&&(o.Nb(0,"div",10),o.Nb(1,"div",1),o.Nb(2,"div",11),o.Nb(3,"h4",7),o.nc(4,"Sin resultados"),o.Mb(),o.Lb(5,"i",12),o.Lb(6,"p",9),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.totalAsignaciones>0)}}function se(t,e){if(1&t){const t=o.Ob();o.Nb(0,"tr"),o.Nb(1,"td"),o.nc(2),o.Mb(),o.Nb(3,"td"),o.nc(4),o.Mb(),o.Nb(5,"td"),o.nc(6),o.Yb(7,"date"),o.Mb(),o.Nb(8,"td",22),o.Nb(9,"a",23),o.Vb("click",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).eliminarAsignacion(i)})),o.Lb(10,"i",24),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=e.$implicit;o.zb(2),o.oc(t.profesional.nombre+" "+t.profesional.apellido),o.zb(2),o.oc(t.profesional.email),o.zb(2),o.oc(o.Zb(7,3,t.fecha,"short"))}}function ce(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div",10),o.Nb(1,"div",1),o.Nb(2,"div",13),o.Nb(3,"div",14),o.Nb(4,"div",15),o.Nb(5,"table",16),o.Nb(6,"thead"),o.Nb(7,"tr"),o.Nb(8,"th",17),o.nc(9,"Nombres"),o.Mb(),o.Nb(10,"th"),o.nc(11,"Email"),o.Mb(),o.Nb(12,"th"),o.nc(13,"Fecha"),o.Mb(),o.Nb(14,"th",18),o.nc(15,"Eliminar"),o.Mb(),o.Mb(),o.Mb(),o.Nb(16,"tbody"),o.mc(17,se,11,6,"tr",19),o.Mb(),o.Mb(),o.Nb(18,"div"),o.Nb(19,"button",20),o.Vb("click",(function(){return o.ic(t),o.Xb().cambiarPagina(-6)})),o.nc(20,"Anterior"),o.Mb(),o.nc(21," \xa0 "),o.Nb(22,"button",20),o.Vb("click",(function(){return o.ic(t),o.Xb().cambiarPagina(6)})),o.nc(23,"Siguiente"),o.Mb(),o.Nb(24,"div",21),o.nc(25),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=o.Xb();o.bc("hidden",0===t.totalAsignaciones),o.zb(17),o.bc("ngForOf",t.asignaciones),o.zb(2),o.bc("disabled",0===t.desde),o.zb(3),o.bc("disabled",t.hasta===t.totalAsignaciones),o.zb(3),o.rc(" ",t.desde+1,"-",t.hasta," (",t.totalAsignaciones,") ")}}const le=c.a.socket_url;let de=(()=>{class t{constructor(t,e,i){this.asignacionService=t,this.activatedRoute=e,this.modalAsignacionService=i,this.totalAsignaciones=0,this.desde=0,this.hasta=6,this.cargando=!0,this.socket=l(le)}ngOnInit(){this.activatedRoute.params.subscribe(({uid:t})=>{this.uid=t,this.cargarAsignaciones(t)}),this.socket.on("nuevo-asignacion",(function(t){t.paciente===this.uid&&this.cargarAsignaciones(this.uid)}).bind(this))}cargarAsignaciones(t){this.cargando=!0,this.asignacionService.cargarAsignaciones(t,this.desde).subscribe(({total:t,asignaciones:e})=>{this.totalAsignaciones=t,this.asignaciones=e,this.asignaciones=e,this.cargando=!1,this.totalAsignaciones<6&&(this.hasta=this.totalAsignaciones)})}cambiarPagina(t){this.desde+=t,this.hasta+=t,this.desde<0?this.desde=0:this.desde>=this.totalAsignaciones&&(this.desde-=t),this.hasta>this.totalAsignaciones?this.hasta=this.totalAsignaciones:this.hasta-this.desde<5&&(this.hasta=this.desde+6),this.cargarAsignaciones(this.uid)}eliminarAsignacion(t){M.a.fire({title:"\xbfEstas seguro?",text:"Eliminar asignaci\xf3n de "+t.profesional.nombre+" "+t.profesional.apellido,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.asignacionService.eliminarAsignacion(t.id).subscribe(e=>{M.a.close(),M.a.fire("Exito!","Asignaci\xf3n eliminada.","success"),this.cargarAsignaciones(this.uid),this.socket.emit("guardar-asignacion",t)},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})}))})}abrirModal(){this.modalAsignacionService.abrirModal(this.uid)}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(Dt.a),o.Kb(a.a),o.Kb(oe.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-asignacion"]],decls:8,vars:3,consts:[[1,"row","animate","fadeIn","fast","text-right"],[1,"col-12"],[1,"btn","btn-success",3,"click"],["class","row animate fadeIn fast",4,"ngIf"],["class","row animate fadeIn fast",3,"hidden",4,"ngIf"],[1,"row","animate","fadeIn","fast"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row","animate","fadeIn","fast",3,"hidden"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-warning","fa-2x"],[1,"card"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[1,"w200"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[1,"btn","btn-info",3,"disabled","click"],[1,"float-right"],[1,"text-nowrap","text-center"],["title","Eliminar",3,"click"],[1,"fa","fa-close","text-danger","cursor"]],template:function(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"button",2),o.Vb("click",(function(){return e.abrirModal()})),o.nc(3,"Asignar"),o.Mb(),o.Mb(),o.Mb(),o.Lb(4,"br"),o.mc(5,ne,7,0,"div",3),o.mc(6,re,7,1,"div",4),o.mc(7,ce,26,7,"div",4)),2&t&&(o.zb(5),o.bc("ngIf",e.cargando),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("ngIf",!e.cargando))},directives:[b.j,b.i],pipes:[b.d],encapsulation:2}),t})();var be=i("oNuZ");function ue(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," El numero de historia es requerido "),o.Mb())}function he(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La fecha de la primera consulta es requerido "),o.Mb())}function me(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," Los datos del entrevistador son requeridos "),o.Mb())}function fe(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," Los nombres son requeridos "),o.Mb())}function pe(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," Los apellidos son requeridos "),o.Mb())}function ge(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," Seleccione el sexo "),o.Mb())}function ve(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La fecha de nacimiento es requerida "),o.Mb())}function Ne(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," El lugar de nacimiento requeridos "),o.Mb())}function Me(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La religi\xf3n es requeridos "),o.Mb())}function xe(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La nacionalidad requeridos "),o.Mb())}function we(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La provincia es requerida "),o.Mb())}function ye(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La ciudad es requerida "),o.Mb())}function Se(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La direccion es requerida "),o.Mb())}function Ce(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," El motivo es requerido "),o.Mb())}function Le(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La instruccion es requerida "),o.Mb())}function Oe(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La ocupacion es requerida "),o.Mb())}function Ie(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," Seleccione el estado c\xedvil "),o.Mb())}function Ee(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informacion del conyuge es requerida "),o.Mb())}function ke(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," El n\xfamero de hijos es requerido "),o.Mb())}function Ae(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," El n\xfamero de celular es requerido "),o.Mb())}function ze(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," El email es requerido "),o.Mb())}function je(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n del contacto de emergencia es requerido "),o.Mb())}function Re(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," El tel\xe9fono es requerido "),o.Mb())}function Te(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La direcci\xf3n es requerida "),o.Mb())}function Pe(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n del acompa\xf1ante es requerida "),o.Mb())}function Fe(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function De(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function _e(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Be(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Ve(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function qe(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Ue(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function He(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function $e(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Xe(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Ge(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Ke(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function We(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Ye(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Ze(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Je(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function Qe(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function ti(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function ei(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function ii(t,e){1&t&&(o.Nb(0,"small",74),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}let ai=(()=>{class t{constructor(t,e,i,a){this.historiasService=t,this.activatedRoute=e,this.fb=i,this.router=a,this.formSubmitted=!1,this.fechaPrimera=new Date,this.entrevistadorInfo="",this.fechaInfo=""}ngOnInit(){this.activatedRoute.params.subscribe(({id:t})=>{this.cargarHistoria(t)}),this.historiaForm=this.fb.group({numero:["",[D.p.required,D.p.minLength(1),D.p.maxLength(6)]],fecha:[{value:"",disabled:!0},[D.p.required,D.p.minLength(3),D.p.maxLength(10)]],entrevistador:[{value:"",disabled:!0},[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],nombres:["",[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],apellidos:["",[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],email:[{value:"",disabled:!0},[D.p.required,D.p.email,D.p.maxLength(50)]],sexo:["",[D.p.required]],fechaNacimiento:["",[D.p.required,D.p.minLength(3),D.p.maxLength(10)]],lugarNacimiento:["",[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],religion:["",[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],nacionalidad:["",[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],provincia:["",[D.p.required,D.p.minLength(3),D.p.maxLength(30)]],ciudad:["",[D.p.required,D.p.minLength(3),D.p.maxLength(30)]],direccion:["",[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],cambioDomicilio:[!1],motivo:[{value:"",disabled:!1}],instruccion:["",[D.p.required,D.p.minLength(3),D.p.maxLength(30)]],ocupacion:["",[D.p.required,D.p.minLength(3),D.p.maxLength(30)]],estadoCivil:["",[D.p.required]],conyuge:["",[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],nHijos:["",[D.p.required,D.p.minLength(1),D.p.maxLength(3)]],convecional:["",[D.p.required,D.p.minLength(10),D.p.maxLength(10)]],celular:["",[D.p.required,D.p.minLength(10),D.p.maxLength(10)]],nombreEmergencia:["",[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],telefonoEmergencia:["",[D.p.required,D.p.minLength(10),D.p.maxLength(10)]],direccionEmergencia:["",[D.p.required,D.p.minLength(3),D.p.maxLength(50)]],"nombreAcompa\xf1ante":["",[D.p.minLength(3),D.p.maxLength(50)]],motivoConsulta:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],factoresEpisodioActual:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],historiaEnfermedad:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],natal:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],infancia:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],pubertad:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],familiar:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],social:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],laboral:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],psicosexual:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],conciencia:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],voluntad:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],atencion:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],sensopercepciones:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],afectividad:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],pensamiento:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],memoria:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],aplicacionPruebas:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],diagnostico:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]],tratamiento:["",[D.p.required,D.p.minLength(3),D.p.maxLength(500)]]})}cargarHistoria(t){M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.historiasService.getHistoria(t).pipe(z(1e3)).subscribe(t=>{if(M.a.close(),!t)return this.router.navigateByUrl("/dashboard/historias");this.historia=t,this.fechaPrimera.setTime(this.historia.fecha);const e=this.fechaPrimera.toISOString().split("T")[0];this.entrevistadorInfo=t.entrevistador.nombre+" "+t.entrevistador.apellido,this.id=this.historia.id,this.fechaInfo=e,this.historiaForm.setValue({entrevistador:this.entrevistadorInfo||"",fecha:e||"",email:this.historia.email||"",numero:this.historia.numero||"",nombres:this.historia.nombres||"",apellidos:this.historia.apellidos||"",fechaNacimiento:this.historia.fechaNacimiento||"",lugarNacimiento:this.historia.lugarNacimiento||"",sexo:this.historia.sexo||"",religion:this.historia.religion||"",nacionalidad:this.historia.nacionalidad||"",provincia:this.historia.provincia||"",ciudad:this.historia.ciudad||"",direccion:this.historia.direccion||"",cambioDomicilio:this.historia.cambioDomicilio||!1,motivo:this.historia.motivo||"",instruccion:this.historia.instruccion||"",ocupacion:this.historia.ocupacion||"",estadoCivil:this.historia.estadoCivil||"",conyuge:this.historia.conyuge||"",nHijos:this.historia.nHijos||"",convecional:this.historia.convecional||"",celular:this.historia.celular||"",nombreEmergencia:this.historia.nombreEmergencia||"",telefonoEmergencia:this.historia.telefonoEmergencia||"",direccionEmergencia:this.historia.direccionEmergencia||"","nombreAcompa\xf1ante":this.historia.nombreAcompa\u00f1ante||"",motivoConsulta:this.historia.motivoConsulta||"",factoresEpisodioActual:this.historia.factoresEpisodioActual||"",historiaEnfermedad:this.historia.historiaEnfermedad||"",natal:this.historia.natal||"",infancia:this.historia.infancia||"",pubertad:this.historia.pubertad||"",familiar:this.historia.familiar||"",social:this.historia.social||"",laboral:this.historia.laboral||"",psicosexual:this.historia.psicosexual||"",conciencia:this.historia.conciencia||"",voluntad:this.historia.voluntad||"",atencion:this.historia.atencion||"",sensopercepciones:this.historia.sensopercepciones||"",afectividad:this.historia.afectividad||"",pensamiento:this.historia.pensamiento||"",memoria:this.historia.memoria||"",aplicacionPruebas:this.historia.aplicacionPruebas||"",diagnostico:this.historia.diagnostico||"",tratamiento:this.historia.tratamiento||""}),this.cambiar()},t=>(M.a.close(),this.router.navigateByUrl("/dashboard/historias")))}guardarHistoria(){if(this.formSubmitted=!0,this.historiaForm.invalid)return;const t=Object.assign({},this.historiaForm.value);M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.historiasService.actualizarHistoria(this.id,t).subscribe(t=>{M.a.close(),M.a.fire({title:"Exito!",text:"Historia cl\xednica actualizada",icon:"success",confirmButtonText:"Aceptar"}),this.router.navigateByUrl("/dashboard/historias")},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}campoNoValido(t){return!(!this.historiaForm.get(t).invalid||!this.formSubmitted)}cambiar(){this.historiaForm.controls.cambioDomicilio.value?(this.historiaForm.controls.motivo.enable(),this.historiaForm.controls.motivo.setValidators([D.p.required,D.p.minLength(3),D.p.maxLength(50)]),this.historiaForm.controls.motivo.updateValueAndValidity()):(this.historiaForm.controls.motivo.setValue(""),this.historiaForm.controls.motivo.disable(),this.historiaForm.controls.motivo.setValidators([]),this.historiaForm.controls.motivo.updateValueAndValidity())}generarPdf(){const t=new be.b;t.info({title:"Historia Cl\xednica",author:"PsicoAndy M&D",subject:"Historia cl\xednica"+this.historiaForm.value.numero}),t.add(new be.c("HISTORIA CL\xcdNICA").alignment("center").bold().fontSize(25).end),t.add(t.ln(1)),t.add(new be.a([new be.c("Historia N. :").bold().end,new be.c(this.historiaForm.value.numero).end]).end),t.add(new be.a([new be.c("Fecha 1ra consulta :").bold().end,new be.c(this.fechaInfo).end]).end),t.add(new be.a([new be.c("Entrevistador :").bold().end,new be.c(this.entrevistadorInfo).end]).end),t.add(t.ln(1)),t.add(new be.c("DATOS INFORMATIVOS").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.a([new be.c("Nombres :").bold().end,new be.c(this.historiaForm.value.nombres).end]).end),t.add(new be.a([new be.c("Apellidos :").bold().end,new be.c(this.historiaForm.value.apellidos).end]).end),t.add(new be.a([new be.c("Sexo :").bold().end,new be.c(this.historiaForm.value.sexo).end]).end),t.add(new be.a([new be.c("Fecha de nacimiento :").bold().end,new be.c(this.historiaForm.value.fechaNacimiento).end]).end),t.add(new be.a([new be.c("Lugar de nacimiento :").bold().end,new be.c(this.historiaForm.value.lugarNacimiento).end]).end),t.add(new be.a([new be.c("Religi\xf3n :").bold().end,new be.c(this.historiaForm.value.religion).end]).end),t.add(new be.a([new be.c("Nacionalidad :").bold().end,new be.c(this.historiaForm.value.nacionalidad).end]).end),t.add(t.ln(1)),t.add(new be.c("DIRECCI\xd3N").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.a([new be.c("Provincia :").bold().end,new be.c(this.historiaForm.value.provincia).end]).end),t.add(new be.a([new be.c("Ciudad :").bold().end,new be.c(this.historiaForm.value.ciudad).end]).end),t.add(new be.c("Calle principal y secundaria  :").bold().end),t.add(new be.c(this.historiaForm.value.direccion).end),this.historiaForm.value.cambioDomicilio?(t.add(new be.a([new be.c("Cambio de domicilio :").bold().end,new be.c("SI").end]).end),t.add(new be.a([new be.c("Motivos :").bold().end,new be.c(this.historiaForm.value.motivo).end]).end)):t.add(new be.a([new be.c("Cambio de domicilio :").bold().end,new be.c("NO").end]).end),t.add(new be.a([new be.c("Instrucci\xf3n :").bold().end,new be.c(this.historiaForm.value.instruccion).end]).end),t.add(new be.a([new be.c("Ocupaci\xf3n :").bold().end,new be.c(this.historiaForm.value.ocupacion).end]).end),t.add(new be.a([new be.c("Estado c\xedvil :").bold().end,new be.c(this.historiaForm.value.estadoCivil).end]).end),t.add(new be.a([new be.c("Nombre del c\xf3nyuge :").bold().end,new be.c(this.historiaForm.value.conyuge).end]).end),t.add(new be.a([new be.c("N\xfamero de hijos :").bold().end,new be.c(this.historiaForm.value.nHijos).end]).end),t.add(t.ln(1)),t.add(new be.c("CONTACTOS").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.a([new be.c("Convencional :").bold().end,new be.c(this.historiaForm.value.convecional).end]).end),t.add(new be.a([new be.c("Celular :").bold().end,new be.c(this.historiaForm.value.celular).end]).end),t.add(new be.a([new be.c("Email :").bold().end,new be.c(this.historia.email).end]).end),t.add(t.ln(1)),t.add(new be.a([new be.c("Contacto de Emergenicia:").bold().end,new be.c(this.historiaForm.value.nombreEmergencia).end]).end),t.add(new be.a([new be.c("Tel\xe9fono:").bold().end,new be.c(this.historiaForm.value.telefonoEmergencia).end]).end),t.add(new be.c("Direcci\xf3n  :").bold().end),t.add(new be.c(this.historiaForm.value.direccionEmergencia).end),t.add(new be.a([new be.c("Nombre del acompa\xf1ante:").bold().end,new be.c(this.historiaForm.value.nombreAcompa\u00f1ante).end]).end),t.add(t.ln(1)),t.add(new be.c("MOTIVO DE CONSULTA").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.motivoConsulta).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("FACTORES DESENCADENANTES DEL EPISODIO ACTUAL").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.factoresEpisodioActual).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("HISTORIA PASADA DE LA ENFERMEDAD").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.historiaEnfermedad).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("PSICOANAMNESIS PERSONAL NORMAL Y PATOLOGICA").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c("Natal").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.natal).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("Infancia").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.infancia).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("Pubertad y Adolescencia").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.pubertad).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("PSICOANAMNESIS FAMILIAR Y PATOLOGICA").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.familiar).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("HISTORIA SOCIAL").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.social).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("HISTORIA LABORAL").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.laboral).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("HISTORIA PSICOSEXUAL").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.psicosexual).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("EXPLORACI\xd3N DE FUNCIONES PS\xcdQUICAS").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c("Conciencia").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.conciencia).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("Voluntad").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.voluntad).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("Atenci\xf3n").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.atencion).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("Sensopercepciones").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.sensopercepciones).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("Afectividad").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.afectividad).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("Pensamiento").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.pensamiento).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("Memoria").bold().fontSize(15).end),t.add(new be.c(this.historiaForm.value.memoria).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("APLICACI\xd3N DE PRUEBAS PSICOL\xd3GICAS").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.aplicacionPruebas).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("DIAGNOSTICO PRESUNTIVO").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.diagnostico).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("TRATAMIENTO Y RECOMENDACIONES").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.historiaForm.value.tratamiento).alignment("justify").end),t.add(t.ln(1)),t.create().open()}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(qt),o.Kb(a.a),o.Kb(D.c),o.Kb(a.c))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-historia"]],decls:336,vars:46,consts:[[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],["id","historiaform",3,"formGroup","ngSubmit"],[1,"form-body"],[1,"row","p-t-20"],[1,"col-md-6"],[1,"form-group"],[1,"control-label"],["type","text","id","numero","placeholder","Historia N.","formControlName","numero",1,"form-control"],["class","text-danger",4,"ngIf"],["type","date","placeholder","dd/mm/yyyy","formControlName","fecha",1,"form-control"],["type","text","id","entrevistador","formControlName","entrevistador",1,"form-control"],[1,"card-title"],["type","text","id","firstName","formControlName","nombres",1,"form-control"],["type","text","id","lastName","formControlName","apellidos",1,"form-control"],["formControlName","sexo",1,"form-control","custom-select"],["value",""],["value","Hombre"],["value","Mujer"],["type","date","placeholder","dd/mm/yyyy","formControlName","fechaNacimiento",1,"form-control"],["type","text","id","lugarNacimiento","formControlName","lugarNacimiento",1,"form-control"],["type","text","id","religion","formControlName","religion",1,"form-control"],["type","text","id","nacimiento","formControlName","nacionalidad",1,"form-control"],[1,"box-title","m-t-40"],["type","text","formControlName","provincia",1,"form-control"],["type","text","formControlName","ciudad",1,"form-control"],[1,"col-md-12"],["type","text","formControlName","direccion",1,"form-control"],["type","checkbox","id","basic_checkbox_2","formControlName","cambioDomicilio",1,"filled-in",3,"change"],["for","basic_checkbox_2"],["type","text","formControlName","motivo",1,"form-control"],["type","text","formControlName","instruccion",1,"form-control"],["type","text","formControlName","ocupacion",1,"form-control"],["formControlName","estadoCivil",1,"form-control","custom-select"],["value","Casado/a"],["value","Soltero/a"],["value","Uni\xf3n libre"],["value","Divorciado/a"],["value","Viudo/a"],["type","text","formControlName","conyuge",1,"form-control"],["type","text","placeholder","0","formControlName","nHijos",1,"form-control"],["type","text","formControlName","convecional",1,"form-control"],["type","text","formControlName","celular",1,"form-control"],["type","text","formControlName","email",1,"form-control"],["type","text","formControlName","nombreEmergencia",1,"form-control"],["type","text","formControlName","telefonoEmergencia",1,"form-control"],["type","text","formControlName","direccionEmergencia",1,"form-control"],["type","text","formControlName","nombreAcompa\xf1ante",1,"form-control"],["rows","5","formControlName","motivoConsulta",1,"form-control"],["rows","5","formControlName","factoresEpisodioActual",1,"form-control"],["rows","5","formControlName","historiaEnfermedad",1,"form-control"],["rows","5","formControlName","natal",1,"form-control"],["rows","5","formControlName","infancia",1,"form-control"],["rows","5","formControlName","pubertad",1,"form-control"],["rows","5","formControlName","familiar",1,"form-control"],["rows","5","formControlName","social",1,"form-control"],["rows","5","formControlName","laboral",1,"form-control"],["rows","5","formControlName","psicosexual",1,"form-control"],["rows","5","formControlName","conciencia",1,"form-control"],["rows","5","formControlName","voluntad",1,"form-control"],["rows","5","formControlName","atencion",1,"form-control"],["rows","5","formControlName","sensopercepciones",1,"form-control"],["rows","5","formControlName","afectividad",1,"form-control"],["rows","5","formControlName","pensamiento",1,"form-control"],["rows","5","formControlName","memoria",1,"form-control"],["rows","5","formControlName","aplicacionPruebas",1,"form-control"],["rows","5","formControlName","diagnostico",1,"form-control"],["rows","5","formControlName","tratamiento",1,"form-control"],[1,"form-actions"],["routerLink","/dashboard/historias","type","button",1,"btn","btn-danger"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-inverse","float-right",3,"click"],[1,"text-danger"]],template:function(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"form",4),o.Vb("ngSubmit",(function(){return e.guardarHistoria()})),o.Nb(5,"div",5),o.Nb(6,"div",6),o.Nb(7,"div",7),o.Nb(8,"div",8),o.Nb(9,"label",9),o.nc(10,"Historia N."),o.Mb(),o.Lb(11,"input",10),o.mc(12,ue,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(13,"div",7),o.Nb(14,"div",8),o.Nb(15,"label",9),o.nc(16,"Fecha 1ra consulta"),o.Mb(),o.Lb(17,"input",12),o.mc(18,he,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(19,"div",6),o.Nb(20,"div",7),o.Nb(21,"div",8),o.Nb(22,"label",9),o.nc(23,"Entrevistador"),o.Mb(),o.Lb(24,"input",13),o.mc(25,me,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(26,"h3",14),o.nc(27,"DATOS INFORMATIVOS"),o.Mb(),o.Lb(28,"hr"),o.Nb(29,"div",6),o.Nb(30,"div",7),o.Nb(31,"div",8),o.Nb(32,"label",9),o.nc(33,"Nombres"),o.Mb(),o.Lb(34,"input",15),o.mc(35,fe,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(36,"div",7),o.Nb(37,"div",8),o.Nb(38,"label",9),o.nc(39,"Apellidos"),o.Mb(),o.Lb(40,"input",16),o.mc(41,pe,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(42,"div",0),o.Nb(43,"div",7),o.Nb(44,"div",8),o.Nb(45,"label",9),o.nc(46,"Sexo"),o.Mb(),o.Nb(47,"select",17),o.Nb(48,"option",18),o.nc(49,"Seleccione el sexo"),o.Mb(),o.Nb(50,"option",19),o.nc(51,"Hombre"),o.Mb(),o.Nb(52,"option",20),o.nc(53,"Mujer"),o.Mb(),o.Mb(),o.mc(54,ge,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(55,"div",7),o.Nb(56,"div",8),o.Nb(57,"label",9),o.nc(58,"Fecha de Nacimiento"),o.Mb(),o.Lb(59,"input",21),o.mc(60,ve,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(61,"div",6),o.Nb(62,"div",7),o.Nb(63,"div",8),o.Nb(64,"label",9),o.nc(65,"Lugar de nacimiento"),o.Mb(),o.Lb(66,"input",22),o.mc(67,Ne,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(68,"div",7),o.Nb(69,"div",8),o.Nb(70,"label",9),o.nc(71,"Religi\xf3n"),o.Mb(),o.Lb(72,"input",23),o.mc(73,Me,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(74,"div",6),o.Nb(75,"div",7),o.Nb(76,"div",8),o.Nb(77,"label",9),o.nc(78,"Nacionalidad"),o.Mb(),o.Lb(79,"input",24),o.mc(80,xe,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(81,"h3",25),o.nc(82,"DIRECCI\xd3N"),o.Mb(),o.Lb(83,"hr"),o.Nb(84,"div",0),o.Nb(85,"div",7),o.Nb(86,"div",8),o.Nb(87,"label"),o.nc(88,"Provincia"),o.Mb(),o.Lb(89,"input",26),o.mc(90,we,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(91,"div",7),o.Nb(92,"div",8),o.Nb(93,"label"),o.nc(94,"Ciudad"),o.Mb(),o.Lb(95,"input",27),o.mc(96,ye,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(97,"div",0),o.Nb(98,"div",28),o.Nb(99,"div",8),o.Nb(100,"label"),o.nc(101,"Calle principal y secundaria"),o.Mb(),o.Lb(102,"input",29),o.mc(103,Se,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(104,"div",0),o.Nb(105,"div",7),o.Nb(106,"div",8),o.Nb(107,"input",30),o.Vb("change",(function(){return e.cambiar()})),o.Mb(),o.Nb(108,"label",31),o.nc(109,"Cambio de domicilio"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(110,"div",0),o.Nb(111,"div",28),o.Nb(112,"div",8),o.Nb(113,"label"),o.nc(114,"Motivos"),o.Mb(),o.Lb(115,"input",32),o.mc(116,Ce,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(117,"div",0),o.Nb(118,"div",7),o.Nb(119,"div",8),o.Nb(120,"label"),o.nc(121,"Instrucci\xf3n"),o.Mb(),o.Lb(122,"input",33),o.mc(123,Le,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(124,"div",7),o.Nb(125,"div",8),o.Nb(126,"label"),o.nc(127,"Ocupaci\xf3n"),o.Mb(),o.Lb(128,"input",34),o.mc(129,Oe,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(130,"div",0),o.Nb(131,"div",7),o.Nb(132,"div",8),o.Nb(133,"label",9),o.nc(134,"Estado civ\xedl"),o.Mb(),o.Nb(135,"select",35),o.Nb(136,"option",18),o.nc(137,"Seleccione el estado c\xedvil"),o.Mb(),o.Nb(138,"option",36),o.nc(139,"Casado/a"),o.Mb(),o.Nb(140,"option",37),o.nc(141,"Soltero/a"),o.Mb(),o.Nb(142,"option",38),o.nc(143,"Uni\xf3n libre"),o.Mb(),o.Nb(144,"option",39),o.nc(145,"Divorciado/a"),o.Mb(),o.Nb(146,"option",40),o.nc(147,"Viudo/a"),o.Mb(),o.Mb(),o.mc(148,Ie,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(149,"div",7),o.Nb(150,"div",8),o.Nb(151,"label"),o.nc(152,"Nombre del c\xf3nyuge"),o.Mb(),o.Lb(153,"input",41),o.mc(154,Ee,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(155,"div",0),o.Nb(156,"div",7),o.Nb(157,"div",8),o.Nb(158,"label"),o.nc(159,"N\xfamero de hijos"),o.Mb(),o.Lb(160,"input",42),o.mc(161,ke,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(162,"h3",14),o.nc(163,"CONTACTOS"),o.Mb(),o.Lb(164,"hr"),o.Nb(165,"div",0),o.Nb(166,"div",7),o.Nb(167,"div",8),o.Nb(168,"label"),o.nc(169,"Convencional"),o.Mb(),o.Lb(170,"input",43),o.Mb(),o.Mb(),o.Nb(171,"div",7),o.Nb(172,"div",8),o.Nb(173,"label"),o.nc(174,"Celular"),o.Mb(),o.Lb(175,"input",44),o.mc(176,Ae,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(177,"div",0),o.Nb(178,"div",7),o.Nb(179,"div",8),o.Nb(180,"label"),o.nc(181,"Email"),o.Mb(),o.Lb(182,"input",45),o.mc(183,ze,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(184,"div",0),o.Nb(185,"div",7),o.Nb(186,"div",8),o.Nb(187,"label"),o.nc(188,"Nombre de contacto de emergencia"),o.Mb(),o.Lb(189,"input",46),o.mc(190,je,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(191,"div",7),o.Nb(192,"div",8),o.Nb(193,"label"),o.nc(194,"Tel\xe9fono"),o.Mb(),o.Lb(195,"input",47),o.mc(196,Re,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(197,"div",0),o.Nb(198,"div",28),o.Nb(199,"div",8),o.Nb(200,"label"),o.nc(201,"Direcci\xf3n"),o.Mb(),o.Lb(202,"input",48),o.mc(203,Te,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(204,"div",0),o.Nb(205,"div",7),o.Nb(206,"div",8),o.Nb(207,"label"),o.nc(208,"Nombre del acompa\xf1ante"),o.Mb(),o.Lb(209,"input",49),o.mc(210,Pe,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(211,"h3",14),o.nc(212,"MOTIVO DE CONSULTA"),o.Mb(),o.Lb(213,"hr"),o.Nb(214,"div",8),o.Lb(215,"textarea",50),o.mc(216,Fe,2,0,"small",11),o.Mb(),o.Nb(217,"h3",14),o.nc(218,"FACTORES DESENCADENANTES DEL EPISODIO ACTUAL"),o.Mb(),o.Lb(219,"hr"),o.Nb(220,"div",8),o.Lb(221,"textarea",51),o.mc(222,De,2,0,"small",11),o.Mb(),o.Nb(223,"h3",14),o.nc(224,"HISTORIA PASADA DE LA ENFERMEDAD"),o.Mb(),o.Lb(225,"hr"),o.Nb(226,"div",8),o.Lb(227,"textarea",52),o.mc(228,_e,2,0,"small",11),o.Mb(),o.Nb(229,"h3",14),o.nc(230,"PSICOANAMNESIS PERSONAL NORMAL Y PATOLOGICA"),o.Mb(),o.Lb(231,"hr"),o.Nb(232,"div",8),o.Nb(233,"label"),o.nc(234,"Natal"),o.Mb(),o.Lb(235,"textarea",53),o.mc(236,Be,2,0,"small",11),o.Mb(),o.Nb(237,"div",8),o.Nb(238,"label"),o.nc(239,"Inf\xe1ncia"),o.Mb(),o.Lb(240,"textarea",54),o.mc(241,Ve,2,0,"small",11),o.Mb(),o.Nb(242,"div",8),o.Nb(243,"label"),o.nc(244,"Pubertad y Adolescencia"),o.Mb(),o.Lb(245,"textarea",55),o.mc(246,qe,2,0,"small",11),o.Mb(),o.Nb(247,"h3",14),o.nc(248,"PSICOANAMNESIS FAMILIAR Y PATOLOGICA"),o.Mb(),o.Lb(249,"hr"),o.Nb(250,"div",8),o.Lb(251,"textarea",56),o.mc(252,Ue,2,0,"small",11),o.Mb(),o.Nb(253,"h3",14),o.nc(254,"HISTORIA SOCIAL"),o.Mb(),o.Lb(255,"hr"),o.Nb(256,"div",8),o.Lb(257,"textarea",57),o.mc(258,He,2,0,"small",11),o.Mb(),o.Nb(259,"h3",14),o.nc(260,"HISTORIA LABORAL"),o.Mb(),o.Lb(261,"hr"),o.Nb(262,"div",8),o.Lb(263,"textarea",58),o.mc(264,$e,2,0,"small",11),o.Mb(),o.Nb(265,"h3",14),o.nc(266,"HISTORIA PSICOSEXUAL"),o.Mb(),o.Lb(267,"hr"),o.Nb(268,"div",8),o.Lb(269,"textarea",59),o.mc(270,Xe,2,0,"small",11),o.Mb(),o.Nb(271,"h3",14),o.nc(272,"EXPLORACI\xd3N DE FUNCIONES PS\xcdQUICAS"),o.Mb(),o.Lb(273,"hr"),o.Nb(274,"div",8),o.Nb(275,"label"),o.nc(276,"Conciencia"),o.Mb(),o.Lb(277,"textarea",60),o.mc(278,Ge,2,0,"small",11),o.Mb(),o.Nb(279,"div",8),o.Nb(280,"label"),o.nc(281,"Voluntad"),o.Mb(),o.Lb(282,"textarea",61),o.mc(283,Ke,2,0,"small",11),o.Mb(),o.Nb(284,"div",8),o.Nb(285,"label"),o.nc(286,"Atenci\xf3n"),o.Mb(),o.Lb(287,"textarea",62),o.mc(288,We,2,0,"small",11),o.Mb(),o.Nb(289,"div",8),o.Nb(290,"label"),o.nc(291,"Sensopercepciones"),o.Mb(),o.Lb(292,"textarea",63),o.mc(293,Ye,2,0,"small",11),o.Mb(),o.Nb(294,"div",8),o.Nb(295,"label"),o.nc(296,"Afectividad"),o.Mb(),o.Lb(297,"textarea",64),o.mc(298,Ze,2,0,"small",11),o.Mb(),o.Nb(299,"div",8),o.Nb(300,"label"),o.nc(301,"Pensamiento"),o.Mb(),o.Lb(302,"textarea",65),o.mc(303,Je,2,0,"small",11),o.Mb(),o.Nb(304,"div",8),o.Nb(305,"label"),o.nc(306,"Memoria"),o.Mb(),o.Lb(307,"textarea",66),o.mc(308,Qe,2,0,"small",11),o.Mb(),o.Nb(309,"h3",14),o.nc(310,"APLICACI\xd3N DE PRUEBAS PSICOL\xd3GICAS"),o.Mb(),o.Lb(311,"hr"),o.Nb(312,"div",8),o.Lb(313,"textarea",67),o.mc(314,ti,2,0,"small",11),o.Mb(),o.Nb(315,"h3",14),o.nc(316,"DIAGNOSTICO PRESUNTIVO"),o.Mb(),o.Lb(317,"hr"),o.Nb(318,"div",8),o.Lb(319,"textarea",68),o.mc(320,ei,2,0,"small",11),o.Mb(),o.Nb(321,"h3",14),o.nc(322,"TRATAMIENTO Y RECOMENDACIONES"),o.Mb(),o.Lb(323,"hr"),o.Nb(324,"div",8),o.Lb(325,"textarea",69),o.mc(326,ii,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(327,"div",70),o.Nb(328,"button",71),o.nc(329,"Cancelar"),o.Mb(),o.nc(330,"\xa0 "),o.Nb(331,"button",72),o.nc(332,"Guardar"),o.Mb(),o.nc(333," \xa0 "),o.Nb(334,"button",73),o.Vb("click",(function(){return e.generarPdf()})),o.nc(335,"Imprimir"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.zb(4),o.bc("formGroup",e.historiaForm),o.zb(8),o.bc("ngIf",e.campoNoValido("numero")),o.zb(6),o.bc("ngIf",e.campoNoValido("fecha")),o.zb(7),o.bc("ngIf",e.campoNoValido("entrevistador")),o.zb(10),o.bc("ngIf",e.campoNoValido("nombres")),o.zb(6),o.bc("ngIf",e.campoNoValido("apellidos")),o.zb(13),o.bc("ngIf",e.campoNoValido("sexo")),o.zb(6),o.bc("ngIf",e.campoNoValido("fechaNacimiento")),o.zb(7),o.bc("ngIf",e.campoNoValido("lugarNacimiento")),o.zb(6),o.bc("ngIf",e.campoNoValido("religion")),o.zb(7),o.bc("ngIf",e.campoNoValido("nacionalidad")),o.zb(10),o.bc("ngIf",e.campoNoValido("provincia")),o.zb(6),o.bc("ngIf",e.campoNoValido("ciudad")),o.zb(7),o.bc("ngIf",e.campoNoValido("direccion")),o.zb(13),o.bc("ngIf",e.campoNoValido("motivo")),o.zb(7),o.bc("ngIf",e.campoNoValido("instruccion")),o.zb(6),o.bc("ngIf",e.campoNoValido("ocupacion")),o.zb(19),o.bc("ngIf",e.campoNoValido("estadoCivil")),o.zb(6),o.bc("ngIf",e.campoNoValido("conyuge")),o.zb(7),o.bc("ngIf",e.campoNoValido("nHijos")),o.zb(15),o.bc("ngIf",e.campoNoValido("celular")),o.zb(7),o.bc("ngIf",e.campoNoValido("email")),o.zb(7),o.bc("ngIf",e.campoNoValido("nombreEmergencia")),o.zb(6),o.bc("ngIf",e.campoNoValido("telefonoEmergencia")),o.zb(7),o.bc("ngIf",e.campoNoValido("direccionEmergencia")),o.zb(7),o.bc("ngIf",e.campoNoValido("nombreAcompa\xf1ante")),o.zb(6),o.bc("ngIf",e.campoNoValido("motivoConsulta")),o.zb(6),o.bc("ngIf",e.campoNoValido("factoresEpisodioActual")),o.zb(6),o.bc("ngIf",e.campoNoValido("historiaEnfermedad")),o.zb(8),o.bc("ngIf",e.campoNoValido("natal")),o.zb(5),o.bc("ngIf",e.campoNoValido("infancia")),o.zb(5),o.bc("ngIf",e.campoNoValido("pubertad")),o.zb(6),o.bc("ngIf",e.campoNoValido("familiar")),o.zb(6),o.bc("ngIf",e.campoNoValido("social")),o.zb(6),o.bc("ngIf",e.campoNoValido("laboral")),o.zb(6),o.bc("ngIf",e.campoNoValido("psicosexual")),o.zb(8),o.bc("ngIf",e.campoNoValido("conciencia")),o.zb(5),o.bc("ngIf",e.campoNoValido("voluntad")),o.zb(5),o.bc("ngIf",e.campoNoValido("atencion")),o.zb(5),o.bc("ngIf",e.campoNoValido("sensopercepciones")),o.zb(5),o.bc("ngIf",e.campoNoValido("afectividad")),o.zb(5),o.bc("ngIf",e.campoNoValido("pensamiento")),o.zb(5),o.bc("ngIf",e.campoNoValido("memoria")),o.zb(6),o.bc("ngIf",e.campoNoValido("aplicacionPruebas")),o.zb(6),o.bc("ngIf",e.campoNoValido("diagnostico")),o.zb(6),o.bc("ngIf",e.campoNoValido("tratamiento")))},directives:[D.r,D.h,D.e,D.b,D.g,D.d,b.j,D.o,D.k,D.q,D.a,a.d],encapsulation:2}),t})();const oi=c.a.base_url;let ni=(()=>{class t{constructor(t){this.http=t}set id(t){this._id=t}get id(){return this._id}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}cargarSeguimientos(t,e=0,i=6){return this.http.get(`${oi}/seguimientos/${t}?desde=${e}&hasta=${i}`,this.headers)}crearSeguimiento(t){return this.http.post(oi+"/seguimientos",t,this.headers)}actualizarSeguimiento(t,e){return this.http.put(`${oi}/seguimientos/${t}`,e,this.headers)}getSeguimiento(t){return this.http.get(`${oi}/seguimientos/getSeguimiento/${t}`,this.headers).pipe(Object(_t.a)(t=>t.seguimiento))}eliminarSeguimiento(t){return this.http.delete(`${oi}/seguimientos/${t}`,this.headers)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(Bt.a))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ri(t,e){1&t&&(o.Nb(0,"div",5),o.Nb(1,"div",1),o.Nb(2,"div",6),o.Nb(3,"h4",7),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",8),o.Lb(6,"p",9),o.Mb(),o.Mb(),o.Mb())}function si(t,e){if(1&t&&(o.Nb(0,"div",10),o.Nb(1,"div",1),o.Nb(2,"div",11),o.Nb(3,"h4",7),o.nc(4,"Sin resultados"),o.Mb(),o.Lb(5,"i",12),o.Lb(6,"p",9),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.totalSeguimientos>0)}}const ci=function(t){return["/dashboard/seguimientos/seguimiento/",t]};function li(t,e){if(1&t){const t=o.Ob();o.Nb(0,"tr"),o.Nb(1,"td"),o.nc(2),o.Mb(),o.Nb(3,"td"),o.nc(4),o.Yb(5,"date"),o.Mb(),o.Nb(6,"td"),o.nc(7),o.Mb(),o.Nb(8,"td",22),o.Nb(9,"a",23),o.Lb(10,"i",24),o.Mb(),o.nc(11,"\xa0 "),o.Nb(12,"a",25),o.Vb("click",(function(){o.ic(t);const i=e.$implicit;return o.Xb(2).eliminarSeguimiento(i)})),o.Lb(13,"i",26),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=e.$implicit;o.zb(2),o.oc(t.numero),o.zb(2),o.oc(o.Zb(5,4,t.fecha,"short")),o.zb(3),o.oc(t.actividad),o.zb(2),o.bc("routerLink",o.ec(7,ci,t.id))}}function di(t,e){if(1&t){const t=o.Ob();o.Nb(0,"div",10),o.Nb(1,"div",1),o.Nb(2,"div",13),o.Nb(3,"div",14),o.Nb(4,"div",15),o.Nb(5,"table",16),o.Nb(6,"thead"),o.Nb(7,"tr"),o.Nb(8,"th",17),o.nc(9,"N\xfamero"),o.Mb(),o.Nb(10,"th"),o.nc(11,"Fecha"),o.Mb(),o.Nb(12,"th"),o.nc(13,"Actividad"),o.Mb(),o.Nb(14,"th",18),o.nc(15,"Acciones"),o.Mb(),o.Mb(),o.Mb(),o.Nb(16,"tbody"),o.mc(17,li,14,9,"tr",19),o.Mb(),o.Mb(),o.Nb(18,"div"),o.Nb(19,"button",20),o.Vb("click",(function(){return o.ic(t),o.Xb().cambiarPagina(-6)})),o.nc(20,"Anterior"),o.Mb(),o.nc(21," \xa0 "),o.Nb(22,"button",20),o.Vb("click",(function(){return o.ic(t),o.Xb().cambiarPagina(6)})),o.nc(23,"Siguiente"),o.Mb(),o.Nb(24,"div",21),o.nc(25),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=o.Xb();o.bc("hidden",0===t.totalSeguimientos),o.zb(17),o.bc("ngForOf",t.seguimientos),o.zb(2),o.bc("disabled",0===t.desde),o.zb(3),o.bc("disabled",t.hasta===t.totalSeguimientos),o.zb(3),o.rc(" ",t.desde+1,"-",t.hasta," (",t.totalSeguimientos,") ")}}let bi=(()=>{class t{constructor(t,e,i,a){this.seguimientoService=t,this.usuarioService=e,this.router=i,this.activatedRoute=a,this.totalSeguimientos=0,this.desde=0,this.hasta=6,this.cargando=!0}ngOnInit(){this.activatedRoute.params.subscribe(({id:t})=>{this.id=t,this.seguimientoService.id=t,this.cargarSeguimientos(t)})}cargarSeguimientos(t){this.cargando=!0,this.seguimientoService.cargarSeguimientos(t).subscribe(({seguimientos:t,total:e})=>{this.totalSeguimientos=e,this.seguimientos=t,this.cargando=!1,this.totalSeguimientos<6&&(this.hasta=this.totalSeguimientos)})}cambiarPagina(t){this.desde+=t,this.hasta+=t,this.desde<0?this.desde=0:this.desde>=this.totalSeguimientos&&(this.desde-=t),this.hasta>this.totalSeguimientos?this.hasta=this.totalSeguimientos:this.hasta-this.desde<5&&(this.hasta=this.desde+6),this.cargarSeguimientos(this.id)}eliminarSeguimiento(t){M.a.fire({title:"\xbfEstas seguro?",text:"Eliminar seguimiento "+t.numero,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.seguimientoService.eliminarSeguimiento(t.id).subscribe(e=>{M.a.close(),M.a.fire("Exito!","Seguimiento "+t.numero+" eliminado.","success"),this.cargarSeguimientos(this.id)},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})}))})}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(ni),o.Kb(n.a),o.Kb(a.c),o.Kb(a.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-seguimientos"]],decls:8,vars:3,consts:[[1,"row","animate","fadeIn","fast","text-right"],[1,"col-12"],["routerLink","/dashboard/seguimientos/seguimiento/nuevo",1,"btn","btn-success"],["class","row animate fadeIn fast",4,"ngIf"],["class","row animate fadeIn fast",3,"hidden",4,"ngIf"],[1,"row","animate","fadeIn","fast"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row","animate","fadeIn","fast",3,"hidden"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-warning","fa-2x"],[1,"card"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[1,"w200"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[1,"btn","btn-info",3,"disabled","click"],[1,"float-right"],[1,"text-nowrap","text-center"],["title","Editar",3,"routerLink"],[1,"fa","fa-edit","cursor"],["title","Eliminar",3,"click"],[1,"fa","fa-close","text-danger","cursor"]],template:function(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"button",2),o.nc(3,"Agregar"),o.Mb(),o.Mb(),o.Mb(),o.Lb(4,"br"),o.mc(5,ri,7,0,"div",3),o.mc(6,si,7,1,"div",4),o.mc(7,di,26,7,"div",4)),2&t&&(o.zb(5),o.bc("ngIf",e.cargando),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("ngIf",!e.cargando))},directives:[a.d,b.j,b.i,a.f],pipes:[b.d],encapsulation:2}),t})();function ui(t,e){1&t&&(o.Nb(0,"small",19),o.nc(1," El numero de sesi\xf3n es requerido "),o.Mb())}function hi(t,e){1&t&&(o.Nb(0,"small",19),o.nc(1," La fecha es requerida "),o.Mb())}function mi(t,e){1&t&&(o.Nb(0,"small",19),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}function fi(t,e){1&t&&(o.Nb(0,"small",19),o.nc(1," La informaci\xf3n es requerida "),o.Mb())}let pi=(()=>{class t{constructor(t,e,i,a,o){this.activatedRoute=t,this.fb=e,this.seguimientoService=i,this.router=a,this.location=o,this.formSubmitted=!1}ngOnInit(){this.activatedRoute.params.subscribe(({id:t})=>{this.id=t,this.cargarSeguimiento(t)}),this.seguimientoForm=this.fb.group({numero:["",[D.p.required,D.p.min(1),D.p.maxLength(3)]],fecha:["",[D.p.required,D.p.min(10),D.p.maxLength(10)]],actividad:["",[D.p.required,D.p.min(3),D.p.maxLength(500)]],observaciones:["",[D.p.required,D.p.min(3),D.p.maxLength(500)]]})}cargarSeguimiento(t){"nuevo"!==t&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.seguimientoService.getSeguimiento(t).pipe(z(1e3)).subscribe(t=>{M.a.close(),t||this.location.back(),this.seguimiento=t,this.seguimientoForm.setValue({numero:t.numero,fecha:t.fecha,actividad:t.actividad,observaciones:t.observaciones})},t=>{M.a.close(),this.location.back()}))}guardarSeguimiento(){this.formSubmitted=!0,this.seguimientoForm.invalid||(this.seguimiento?this.actualizarSeguimiento():this.nuevoSeguimiento())}nuevoSeguimiento(){const t=Object.assign({paciente:this.seguimientoService.id},this.seguimientoForm.value);M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.seguimientoService.crearSeguimiento(t).subscribe(t=>{M.a.close(),M.a.fire({title:"Exito!",text:"Seguimiento guardada",icon:"success",confirmButtonText:"Aceptar"}),this.location.back()},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}actualizarSeguimiento(){const t=Object.assign({fechaActualizacion:(new Date).getTime()},this.seguimientoForm.value);M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.seguimientoService.actualizarSeguimiento(this.id,t).subscribe(t=>{M.a.close(),M.a.fire({title:"Exito!",text:"Seguimiento actualizado",icon:"success",confirmButtonText:"Aceptar"}),this.location.back()},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}cancelar(){this.location.back()}campoNoValido(t){return!(!this.seguimientoForm.get(t).invalid||!this.formSubmitted)}generarPdf(){const t=new be.b;t.info({title:"Seguimiento",author:"PsicoAndy M&D",subject:"Seguimiento"+this.seguimientoForm.value.numero}),t.add(new be.c("SEGUIMIENTO").alignment("center").bold().fontSize(25).end),t.add(t.ln(1)),t.add(new be.a([new be.c("Sesion N. :").bold().end,new be.c(this.seguimientoForm.value.numero).end]).end),t.add(new be.a([new be.c("Fecha :").bold().end,new be.c(this.seguimientoForm.value.fecha).end]).end),t.add(t.ln(1)),t.add(t.ln(1)),t.add(new be.c("ACTIVIDAD").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.seguimientoForm.value.actividad).alignment("justify").end),t.add(t.ln(1)),t.add(new be.c("OBSERVACIONES").bold().decoration("underline").fontSize(20).end),t.add(t.ln(1)),t.add(new be.c(this.seguimientoForm.value.observaciones).alignment("justify").end),t.add(t.ln(1)),t.create().open()}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(a.a),o.Kb(D.c),o.Kb(ni),o.Kb(a.c),o.Kb(b.g))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-seguimiento"]],decls:38,vars:5,consts:[[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],["id","historiaform",3,"formGroup","ngSubmit"],[1,"form-body"],[1,"row","p-t-20"],[1,"col-md-6"],[1,"form-group"],[1,"control-label"],["type","text","id","numero","placeholder","Sesi\xf3n N.","formControlName","numero",1,"form-control"],["class","text-danger",4,"ngIf"],["type","date","placeholder","dd/mm/yyyy","formControlName","fecha",1,"form-control"],["rows","5","formControlName","actividad",1,"form-control"],["rows","5","formControlName","observaciones",1,"form-control"],[1,"form-actions"],["type","button",1,"btn","btn-danger",3,"click"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-inverse","float-right",3,"click"],[1,"text-danger"]],template:function(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"form",4),o.Vb("ngSubmit",(function(){return e.guardarSeguimiento()})),o.Nb(5,"div",5),o.Nb(6,"div",6),o.Nb(7,"div",7),o.Nb(8,"div",8),o.Nb(9,"label",9),o.nc(10,"Sesi\xf3n N."),o.Mb(),o.Lb(11,"input",10),o.mc(12,ui,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(13,"div",7),o.Nb(14,"div",8),o.Nb(15,"label",9),o.nc(16,"Fecha"),o.Mb(),o.Lb(17,"input",12),o.mc(18,hi,2,0,"small",11),o.Mb(),o.Mb(),o.Mb(),o.Nb(19,"div",8),o.Nb(20,"label"),o.nc(21,"Actividad"),o.Mb(),o.Lb(22,"textarea",13),o.mc(23,mi,2,0,"small",11),o.Mb(),o.Nb(24,"div",8),o.Nb(25,"label"),o.nc(26,"Observaciones"),o.Mb(),o.Lb(27,"textarea",14),o.mc(28,fi,2,0,"small",11),o.Mb(),o.Mb(),o.Nb(29,"div",15),o.Nb(30,"button",16),o.Vb("click",(function(){return e.cancelar()})),o.nc(31,"Cancelar"),o.Mb(),o.nc(32,"\xa0 "),o.Nb(33,"button",17),o.nc(34,"Guardar"),o.Mb(),o.nc(35,"\xa0 "),o.Nb(36,"button",18),o.Vb("click",(function(){return e.generarPdf()})),o.nc(37,"Imprimir"),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.zb(4),o.bc("formGroup",e.seguimientoForm),o.zb(8),o.bc("ngIf",e.campoNoValido("numero")),o.zb(6),o.bc("ngIf",e.campoNoValido("fecha")),o.zb(5),o.bc("ngIf",e.campoNoValido("actividad")),o.zb(5),o.bc("ngIf",e.campoNoValido("observaciones")))},directives:[D.r,D.h,D.e,D.b,D.g,D.d,b.j],encapsulation:2}),t})();var gi=i("mrSG"),vi=i("I83f"),Ni=i.n(vi),Mi=i("1hAE"),xi=function(t,e){return(xi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function wi(t,e){function i(){this.constructor=t}xi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var yi=function(){return(yi=Object.assign||function(t){for(var e,i=1,a=arguments.length;i<a;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Si=i("PN1e"),Ci=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wi(e,t),e.prototype.getKeyInfo=function(){return{allDay:{},timed:{}}},e.prototype.getKeysForDateSpan=function(t){return t.allDay?["allDay"]:["timed"]},e.prototype.getKeysForEventDef=function(t){return t.allDay?Object(Mi.Gb)(t)?["timed","allDay"]:["allDay"]:["timed"]},e}(Mi.F),Li=Object(Mi.jb)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function Oi(t){var e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return Object(Mi.gb)(Mi.H.Consumer,null,(function(i){if(!t.isLabeled)return Object(Mi.gb)("td",{className:e.join(" "),"data-time":t.isoTimeStr});var a=i.dateEnv,o=i.options,n=i.viewApi,r=null==o.slotLabelFormat?Li:Array.isArray(o.slotLabelFormat)?Object(Mi.jb)(o.slotLabelFormat[0]):Object(Mi.jb)(o.slotLabelFormat),s={level:0,time:t.time,date:a.toDate(t.date),view:n,text:a.format(t.date,r)};return Object(Mi.gb)(Mi.B,{hookProps:s,classNames:o.slotLabelClassNames,content:o.slotLabelContent,defaultContent:Ii,didMount:o.slotLabelDidMount,willUnmount:o.slotLabelWillUnmount},(function(i,a,o,n){return Object(Mi.gb)("td",{ref:i,className:e.concat(a).join(" "),"data-time":t.isoTimeStr},Object(Mi.gb)("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},Object(Mi.gb)("div",{className:"fc-timegrid-slot-label-cushion fc-scrollgrid-shrink-cushion",ref:o},n)))}))}))}function Ii(t){return t.text}var Ei=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wi(e,t),e.prototype.render=function(){return this.props.slatMetas.map((function(t){return Object(Mi.gb)("tr",{key:t.key},Object(Mi.gb)(Oi,yi({},t)))}))},e}(Mi.b),ki=Object(Mi.jb)({week:"short"}),Ai=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allDaySplitter=new Ci,e.headerElRef=Object(Mi.lb)(),e.rootElRef=Object(Mi.lb)(),e.scrollerElRef=Object(Mi.lb)(),e.state={slatCoords:null},e.handleScrollTopRequest=function(t){var i=e.scrollerElRef.current;i&&(i.scrollTop=t)},e.renderHeadAxis=function(t){void 0===t&&(t="");var i=e.context.options,a=e.props.dateProfile.renderRange,o=Object(Mi.nb)(a.start,a.end),n=i.navLinks&&1===o?{"data-navlink":Object(Mi.W)(a.start,"week"),tabIndex:0}:{};return i.weekNumbers?Object(Mi.gb)(Mi.J,{date:a.start,defaultFormat:ki},(function(e,i,a,o){return Object(Mi.gb)("th",{ref:e,className:["fc-timegrid-axis","fc-scrollgrid-shrink"].concat(i).join(" ")},Object(Mi.gb)("div",{className:"fc-timegrid-axis-frame fc-scrollgrid-shrink-frame fc-timegrid-axis-frame-liquid",style:{height:t}},Object(Mi.gb)("a",yi({ref:a,className:"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner"},n),o)))})):Object(Mi.gb)("th",{className:"fc-timegrid-axis"},Object(Mi.gb)("div",{className:"fc-timegrid-axis-frame",style:{height:t}}))},e.renderTableRowAxis=function(t){var i=e.context,a=i.options,o={text:a.allDayText,view:i.viewApi};return Object(Mi.gb)(Mi.B,{hookProps:o,classNames:a.allDayClassNames,content:a.allDayContent,defaultContent:zi,didMount:a.allDayDidMount,willUnmount:a.allDayWillUnmount},(function(e,i,a,o){return Object(Mi.gb)("td",{ref:e,className:["fc-timegrid-axis","fc-scrollgrid-shrink"].concat(i).join(" ")},Object(Mi.gb)("div",{className:"fc-timegrid-axis-frame fc-scrollgrid-shrink-frame"+(null==t?" fc-timegrid-axis-frame-liquid":""),style:{height:t}},Object(Mi.gb)("span",{className:"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner",ref:a},o)))}))},e.handleSlatCoords=function(t){e.setState({slatCoords:t})},e}return wi(e,t),e.prototype.renderSimpleLayout=function(t,e,i){var a=this.context,o=this.props,n=[],r=Object(Mi.Eb)(a.options);return t&&n.push({type:"header",key:"header",isSticky:r,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),e&&(n.push({type:"body",key:"all-day",chunk:{content:e}}),n.push({type:"body",key:"all-day-divider",outerContent:Object(Mi.gb)("tr",{className:"fc-scrollgrid-section"},Object(Mi.gb)("td",{className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))})),n.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(a.options.expandRows),chunk:{scrollerElRef:this.scrollerElRef,content:i}}),Object(Mi.gb)(Mi.I,{viewSpec:a.viewSpec,elRef:this.rootElRef},(function(t,e){return Object(Mi.gb)("div",{className:["fc-timegrid"].concat(e).join(" "),ref:t},Object(Mi.gb)(Mi.D,{liquid:!o.isHeightAuto&&!o.forPrint,cols:[{width:"shrink"}],sections:n}))}))},e.prototype.renderHScrollLayout=function(t,e,i,a,o,n,r){var s=this,c=this.context.pluginHooks.scrollGridImpl;if(!c)throw new Error("No ScrollGrid implementation");var l=this.context,d=this.props,b=!d.forPrint&&Object(Mi.Eb)(l.options),u=!d.forPrint&&Object(Mi.Db)(l.options),h=[];t&&h.push({type:"header",key:"header",isSticky:b,syncRowHeights:!0,chunks:[{key:"axis",rowContent:function(t){return Object(Mi.gb)("tr",null,s.renderHeadAxis(t.rowSyncHeights[0]))}},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),e&&(h.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:function(t){return Object(Mi.gb)("tr",null,s.renderTableRowAxis(t.rowSyncHeights[0]))}},{key:"cols",content:e}]}),h.push({key:"all-day-divider",type:"body",outerContent:Object(Mi.gb)("tr",{className:"fc-scrollgrid-section"},Object(Mi.gb)("td",{colSpan:2,className:"fc-timegrid-divider "+l.theme.getClass("tableCellShaded")}))}));var m=l.options.nowIndicator;return h.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(l.options.expandRows),chunks:[{key:"axis",content:function(t){return Object(Mi.gb)("div",{className:"fc-timegrid-axis-chunk"},Object(Mi.gb)("table",{style:{height:t.expandRows?t.clientHeight:""}},t.tableColGroupNode,Object(Mi.gb)("tbody",null,Object(Mi.gb)(Ei,{slatMetas:n}))),Object(Mi.gb)("div",{className:"fc-timegrid-now-indicator-container"},Object(Mi.gb)(Mi.y,{unit:m?"minute":"day"},(function(t){var e=m&&r&&r.safeComputeTop(t);return"number"==typeof e?Object(Mi.gb)(Mi.x,{isAxis:!0,date:t},(function(t,i,a,o){return Object(Mi.gb)("div",{ref:t,className:["fc-timegrid-now-indicator-arrow"].concat(i).join(" "),style:{top:e}},o)})):null}))))}},{key:"cols",scrollerElRef:this.scrollerElRef,content:i}]}),u&&h.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Mi.ec},{key:"cols",content:Mi.ec}]}),Object(Mi.gb)(Mi.I,{viewSpec:l.viewSpec,elRef:this.rootElRef},(function(t,e){return Object(Mi.gb)("div",{className:["fc-timegrid"].concat(e).join(" "),ref:t},Object(Mi.gb)(c,{liquid:!d.isHeightAuto&&!d.forPrint,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:a,minWidth:o}]}],sections:h}))}))},e.prototype.getAllDayMaxEventProps=function(){var t=this.context.options,e=t.dayMaxEvents,i=t.dayMaxEventRows;return!0!==e&&!0!==i||(e=void 0,i=5),{dayMaxEvents:e,dayMaxEventRows:i}},e}(Mi.i);function zi(t){return t.text}var ji=function(){function t(t,e,i){this.positions=t,this.dateProfile=e,this.slatMetas=i}return t.prototype.safeComputeTop=function(t){var e=this.dateProfile;if(Object(Mi.Yb)(e.currentRange,t)){var i=Object(Mi.hc)(t),a=t.valueOf()-i.valueOf();if(a>=Object(Mi.T)(e.slotMinTime)&&a<Object(Mi.T)(e.slotMaxTime))return this.computeTimeTop(Object(Mi.fb)(a))}return null},t.prototype.computeDateTop=function(t,e){return e||(e=Object(Mi.hc)(t)),this.computeTimeTop(Object(Mi.fb)(t.valueOf()-e.valueOf()))},t.prototype.computeTimeTop=function(t){var e,i,a=this.positions,o=this.dateProfile,n=this.slatMetas,r=a.els.length,s=n[1].date.valueOf()-n[0].date.valueOf(),c=(t.milliseconds-Object(Mi.T)(o.slotMinTime))/s;return c=Math.max(0,c),c=Math.min(r,c),e=Math.floor(c),i=c-(e=Math.min(e,r-1)),a.tops[e]+a.getHeight(e)*i},t}(),Ri=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wi(e,t),e.prototype.render=function(){var t=this.props,e=this.context,i=e.options,a=t.slatElRefs;return Object(Mi.gb)("tbody",null,t.slatMetas.map((function(o,n){var r={time:o.time,date:e.dateEnv.toDate(o.date),view:e.viewApi},s=["fc-timegrid-slot","fc-timegrid-slot-lane",o.isLabeled?"":"fc-timegrid-slot-minor"];return Object(Mi.gb)("tr",{key:o.key,ref:a.createRef(o.key)},t.axis&&Object(Mi.gb)(Oi,yi({},o)),Object(Mi.gb)(Mi.B,{hookProps:r,classNames:i.slotLaneClassNames,content:i.slotLaneContent,didMount:i.slotLaneDidMount,willUnmount:i.slotLaneWillUnmount},(function(t,e,i,a){return Object(Mi.gb)("td",{ref:t,className:s.concat(e).join(" "),"data-time":o.isoTimeStr},a)})))})))},e}(Mi.b),Ti=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootElRef=Object(Mi.lb)(),e.slatElRefs=new Mi.A,e}return wi(e,t),e.prototype.render=function(){var t=this.props,e=this.context;return Object(Mi.gb)("div",{className:"fc-timegrid-slots",ref:this.rootElRef},Object(Mi.gb)("table",{className:e.theme.getClass("table"),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:t.minHeight}},t.tableColGroupNode,Object(Mi.gb)(Ri,{slatElRefs:this.slatElRefs,axis:t.axis,slatMetas:t.slatMetas})))},e.prototype.componentDidMount=function(){this.updateSizing()},e.prototype.componentDidUpdate=function(){this.updateSizing()},e.prototype.componentWillUnmount=function(){this.props.onCoords&&this.props.onCoords(null)},e.prototype.updateSizing=function(){var t,e=this.props;e.onCoords&&null!==e.clientWidth&&this.rootElRef.current.offsetHeight&&e.onCoords(new ji(new Mi.z(this.rootElRef.current,(t=this.slatElRefs.currentMap,e.slatMetas.map((function(e){return t[e.key]}))),!1,!0),this.props.dateProfile,e.slatMetas))},e}(Mi.b);function Pi(t,e){var i,a=[];for(i=0;i<e;i+=1)a.push([]);if(t)for(i=0;i<t.length;i+=1)a[t[i].col].push(t[i]);return a}function Fi(t,e){var i=[];if(t){for(r=0;r<e;r+=1)i[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(var a=0,o=t.segs;a<o.length;a++){var n=o[a];i[n.col].segs.push(n)}}else for(var r=0;r<e;r+=1)i[r]=null;return i}function Di(t,e,i,a){for(var o=0,n=t;o<n.length;o++){var r=n[o];r.top=i.computeDateTop(r.start,e),r.bottom=Math.max(r.top+(a||0),i.computeDateTop(r.end,e))}}function _i(t,e,i){void 0===i&&(i=[]);for(var a=0;a<e.length;a+=1)(o=t).bottom>(n=e[a]).top&&o.top<n.bottom&&i.push(e[a]);var o,n;return i}function Bi(t){var e,i,a=t.forwardSegs,o=0;if(null==t.forwardPressure){for(e=0;e<a.length;e+=1)Bi(i=a[e]),o=Math.max(o,1+i.forwardPressure);t.forwardPressure=o}}function Vi(t,e,i,a){var o,n=t.forwardSegs;if(null==t.forwardCoord)for(n.length?(function(t,e){var i=t.map(qi),a=[{field:"forwardPressure",order:-1},{field:"backwardCoord",order:1}].concat(e);i.sort((function(t,e){return Object(Mi.Z)(t,e,a)})),i.map((function(t){return t._seg}))}(n,a),Vi(n[0],e+1,i,a),t.forwardCoord=n[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-i)/(e+1),o=0;o<n.length;o+=1)Vi(n[o],0,t.forwardCoord,a)}function qi(t){var e=Object(Mi.X)(t);return e.forwardPressure=t.forwardPressure,e.backwardCoord=t.backwardCoord,e}var Ui=Object(Mi.jb)({hour:"numeric",minute:"2-digit",meridiem:!1}),Hi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wi(e,t),e.prototype.render=function(){var t=["fc-timegrid-event","fc-v-event"];return this.props.isCondensed&&t.push("fc-timegrid-event-condensed"),Object(Mi.gb)(Mi.G,yi({},this.props,{defaultTimeFormat:Ui,extraClassNames:t}))},e}(Mi.b),$i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wi(e,t),e.prototype.render=function(){var t=this.props;return Object(Mi.gb)(Mi.k,{date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,extraHookProps:t.extraHookProps},(function(t,e){return e&&Object(Mi.gb)("div",{className:"fc-timegrid-col-misc",ref:t},e)}))},e}(Mi.b);Mi.db.timeGridEventCondensedHeight=30;var Xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wi(e,t),e.prototype.render=function(){var t=this,e=this.props,i=this.context.options.selectMirror,a=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||i&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return Object(Mi.gb)(Mi.l,{elRef:e.elRef,date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraHookProps:e.extraHookProps},(function(n,r,s){return Object(Mi.gb)("td",yi({ref:n,className:["fc-timegrid-col"].concat(r,e.extraClassNames||[]).join(" ")},s,e.extraDataAttrs),Object(Mi.gb)("div",{className:"fc-timegrid-col-frame"},Object(Mi.gb)("div",{className:"fc-timegrid-col-bg"},t.renderFillSegs(e.businessHourSegs,"non-business"),t.renderFillSegs(e.bgEventSegs,"bg-event"),t.renderFillSegs(e.dateSelectionSegs,"highlight")),Object(Mi.gb)("div",{className:"fc-timegrid-col-events"},t.renderFgSegs(e.fgEventSegs,o)),Object(Mi.gb)("div",{className:"fc-timegrid-col-events"},t.renderFgSegs(a,{},Boolean(e.eventDrag),Boolean(e.eventResize),Boolean(i))),Object(Mi.gb)("div",{className:"fc-timegrid-now-indicator-container"},t.renderNowIndicator(e.nowIndicatorSegs)),Object(Mi.gb)($i,{date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraHookProps:e.extraHookProps})))}))},e.prototype.renderFgSegs=function(t,e,i,a,o){var n=this.props;return n.forPrint?this.renderPrintFgSegs(t):n.slatCoords?this.renderPositionedFgSegs(t,e,i,a,o):null},e.prototype.renderPrintFgSegs=function(t){var e=this.props,i=this.context;return(t=Object(Mi.gc)(t,i.options.eventOrder)).map((function(t){return Object(Mi.gb)("div",{className:"fc-timegrid-event-harness",key:t.eventRange.instance.instanceId},Object(Mi.gb)(Hi,yi({seg:t,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isCondensed:!1},Object(Mi.Cb)(t,e.todayRange,e.nowDate))))}))},e.prototype.renderPositionedFgSegs=function(t,e,i,a,o){var n=this,r=this.context,s=this.props;return(t=function(t,e,i,a,o){return Di(t,e,i,a),function(t,e){for(var i=0,a=t;i<a.length;i++)(d=a[i]).level=null,d.forwardCoord=null,d.backwardCoord=null,d.forwardPressure=null;var o,n=function(t){var e,i,a,o=[];for(e=0;e<t.length;e+=1){for(i=t[e],a=0;a<o.length&&_i(i,o[a]).length;a+=1);i.level=a,(o[a]||(o[a]=[])).push(i)}return o}(t=Object(Mi.gc)(t,e));if(function(t){var e,i,a,o,n;for(e=0;e<t.length;e+=1)for(i=t[e],a=0;a<i.length;a+=1)for((o=i[a]).forwardSegs=[],n=e+1;n<t.length;n+=1)_i(o,t[n],o.forwardSegs)}(n),o=n[0]){for(var r=0,s=o;r<s.length;r++)Bi(d=s[r]);for(var c=0,l=o;c<l.length;c++){var d;Vi(d=l[c],0,0,e)}}return t}(t,o)}(t,s.date,s.slatCoords,r.options.eventMinHeight,r.options.eventOrder)).map((function(t){var r=t.eventRange.instance.instanceId,c=i||a||o?yi({left:0,right:0},n.computeSegTopBottomCss(t)):n.computeFgSegPositionCss(t);return Object(Mi.gb)("div",{className:"fc-timegrid-event-harness"+(t.level>0?" fc-timegrid-event-harness-inset":""),key:r,style:yi({visibility:e[r]?"hidden":""},c)},Object(Mi.gb)(Hi,yi({seg:t,isDragging:i,isResizing:a,isDateSelecting:o,isSelected:r===s.eventSelection,isCondensed:t.bottom-t.top<Mi.db.timeGridEventCondensedHeight},Object(Mi.Cb)(t,s.todayRange,s.nowDate))))}))},e.prototype.renderFillSegs=function(t,e){var i=this,a=this.props;if(!a.slatCoords)return null;Di(t,a.date,a.slatCoords,this.context.options.eventMinHeight);var o=t.map((function(t){return Object(Mi.gb)("div",{key:Object(Mi.V)(t.eventRange),className:"fc-timegrid-bg-harness",style:i.computeSegTopBottomCss(t)},"bg-event"===e?Object(Mi.gb)(Mi.c,yi({seg:t},Object(Mi.Cb)(t,a.todayRange,a.nowDate))):Object(Mi.dc)(e))}));return Object(Mi.gb)(Mi.v,null,o)},e.prototype.renderNowIndicator=function(t){var e=this.props,i=e.slatCoords,a=e.date;return i?t.map((function(t,e){return Object(Mi.gb)(Mi.x,{isAxis:!1,date:a,key:e},(function(e,o,n,r){return Object(Mi.gb)("div",{ref:e,className:["fc-timegrid-now-indicator-line"].concat(o).join(" "),style:{top:i.computeDateTop(t.start,a)}},r)}))})):null},e.prototype.computeFgSegPositionCss=function(t){var e,i,a=this.context,o=a.isRtl,n=a.options.slotEventOverlap,r=t.backwardCoord,s=t.forwardCoord;n&&(s=Math.min(1,r+2*(s-r))),o?(e=1-s,i=r):(e=r,i=1-s);var c={zIndex:t.level+1,left:100*e+"%",right:100*i+"%"};return n&&t.forwardPressure&&(c[o?"marginLeft":"marginRight"]=20),yi(yi({},c),this.computeSegTopBottomCss(t))},e.prototype.computeSegTopBottomCss=function(t){return{top:t.top,bottom:-t.bottom}},e}(Mi.b),Gi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.splitFgEventSegs=Object(Mi.Rb)(Pi),e.splitBgEventSegs=Object(Mi.Rb)(Pi),e.splitBusinessHourSegs=Object(Mi.Rb)(Pi),e.splitNowIndicatorSegs=Object(Mi.Rb)(Pi),e.splitDateSelectionSegs=Object(Mi.Rb)(Pi),e.splitEventDrag=Object(Mi.Rb)(Fi),e.splitEventResize=Object(Mi.Rb)(Fi),e.rootElRef=Object(Mi.lb)(),e.cellElRefs=new Mi.A,e}return wi(e,t),e.prototype.render=function(){var t=this,e=this.props,i=this.context.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),a=e.cells.length,o=this.splitFgEventSegs(e.fgEventSegs,a),n=this.splitBgEventSegs(e.bgEventSegs,a),r=this.splitBusinessHourSegs(e.businessHourSegs,a),s=this.splitNowIndicatorSegs(e.nowIndicatorSegs,a),c=this.splitDateSelectionSegs(e.dateSelectionSegs,a),l=this.splitEventDrag(e.eventDrag,a),d=this.splitEventResize(e.eventResize,a);return Object(Mi.gb)("div",{className:"fc-timegrid-cols",ref:this.rootElRef},Object(Mi.gb)("table",{style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,Object(Mi.gb)("tbody",null,Object(Mi.gb)("tr",null,e.axis&&Object(Mi.gb)("td",{className:"fc-timegrid-col fc-timegrid-axis"},Object(Mi.gb)("div",{className:"fc-timegrid-col-frame"},Object(Mi.gb)("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof i&&Object(Mi.gb)(Mi.x,{isAxis:!0,date:e.nowDate},(function(t,e,a,o){return Object(Mi.gb)("div",{ref:t,className:["fc-timegrid-now-indicator-arrow"].concat(e).join(" "),style:{top:i}},o)}))))),e.cells.map((function(i,a){return Object(Mi.gb)(Xi,{key:i.key,elRef:t.cellElRefs.createRef(i.key),dateProfile:e.dateProfile,date:i.date,nowDate:e.nowDate,todayRange:e.todayRange,extraHookProps:i.extraHookProps,extraDataAttrs:i.extraDataAttrs,extraClassNames:i.extraClassNames,fgEventSegs:o[a],bgEventSegs:n[a],businessHourSegs:r[a],nowIndicatorSegs:s[a],dateSelectionSegs:c[a],eventDrag:l[a],eventResize:d[a],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint})}))))))},e.prototype.componentDidMount=function(){this.updateCoords()},e.prototype.componentDidUpdate=function(){this.updateCoords()},e.prototype.updateCoords=function(){var t,e=this.props;e.onColCoords&&null!==e.clientWidth&&e.onColCoords(new Mi.z(this.rootElRef.current,(t=this.cellElRefs.currentMap,e.cells.map((function(e){return t[e.key]}))),!0,!1))},e}(Mi.b),Ki=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.processSlotOptions=Object(Mi.Rb)(Wi),e.state={slatCoords:null},e.handleScrollRequest=function(t){var i=e.props.onScrollTopRequest,a=e.state.slatCoords;if(i&&a){if(t.time){var o=a.computeTimeTop(t.time);(o=Math.ceil(o))&&(o+=1),i(o)}return!0}return!1},e.handleColCoords=function(t){e.colCoords=t},e.handleSlatCoords=function(t){e.setState({slatCoords:t}),e.props.onSlatCoords&&e.props.onSlatCoords(t)},e}return wi(e,t),e.prototype.render=function(){var t=this.props,e=this.state;return Object(Mi.gb)("div",{className:"fc-timegrid-body",ref:t.rootElRef,style:{width:t.clientWidth,minWidth:t.tableMinWidth}},Object(Mi.gb)(Ti,{axis:t.axis,dateProfile:t.dateProfile,slatMetas:t.slatMetas,clientWidth:t.clientWidth,minHeight:t.expandRows?t.clientHeight:"",tableMinWidth:t.tableMinWidth,tableColGroupNode:t.axis?t.tableColGroupNode:null,onCoords:this.handleSlatCoords}),Object(Mi.gb)(Gi,{cells:t.cells,axis:t.axis,dateProfile:t.dateProfile,businessHourSegs:t.businessHourSegs,bgEventSegs:t.bgEventSegs,fgEventSegs:t.fgEventSegs,dateSelectionSegs:t.dateSelectionSegs,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange,nowDate:t.nowDate,nowIndicatorSegs:t.nowIndicatorSegs,clientWidth:t.clientWidth,tableMinWidth:t.tableMinWidth,tableColGroupNode:t.tableColGroupNode,slatCoords:e.slatCoords,onColCoords:this.handleColCoords,forPrint:t.forPrint}))},e.prototype.componentDidMount=function(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)},e.prototype.componentDidUpdate=function(t){this.scrollResponder.update(t.dateProfile!==this.props.dateProfile)},e.prototype.componentWillUnmount=function(){this.scrollResponder.detach()},e.prototype.positionToHit=function(t,e){var i=this.context,a=i.dateEnv,o=this.colCoords,n=this.props.dateProfile,r=this.state.slatCoords,s=this.processSlotOptions(this.props.slotDuration,i.options.snapDuration),c=s.snapDuration,l=s.snapsPerSlot,d=o.leftToIndex(t),b=r.positions.topToIndex(e);if(null!=d&&null!=b){var u=r.positions.tops[b],h=r.positions.getHeight(b),m=b*l+Math.floor((e-u)/h*l),f=this.props.cells[d].date,p=Object(Mi.M)(n.slotMinTime,Object(Mi.Sb)(c,m)),g=a.add(f,p);return{col:d,dateSpan:{range:{start:g,end:a.add(g,c)},allDay:!1},dayEl:o.els[d],relativeRect:{left:o.lefts[d],right:o.rights[d],top:u,bottom:u+h}}}return null},e}(Mi.b);function Wi(t,e){var i=e||t,a=Object(Mi.lc)(t,i);return null===a&&(i=t,a=1),{snapDuration:i,snapsPerSlot:a}}var Yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wi(e,t),e.prototype.sliceRange=function(t,e){for(var i=[],a=0;a<e.length;a+=1){var o=Object(Mi.Kb)(t,e[a]);o&&i.push({start:o.start,end:o.end,isStart:o.start.valueOf()===t.start.valueOf(),isEnd:o.end.valueOf()===t.end.valueOf(),col:a})}return i},e}(Mi.E),Zi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buildDayRanges=Object(Mi.Rb)(Ji),e.slicer=new Yi,e.timeColsRef=Object(Mi.lb)(),e.handleRootEl=function(t){t?e.context.registerInteractiveComponent(e,{el:t}):e.context.unregisterInteractiveComponent(e)},e}return wi(e,t),e.prototype.render=function(){var t=this,e=this.props,i=this.context,a=e.dateProfile,o=e.dayTableModel,n=i.options.nowIndicator,r=this.buildDayRanges(o,a,i.dateEnv);return Object(Mi.gb)(Mi.y,{unit:n?"minute":"day"},(function(s,c){return Object(Mi.gb)(Ki,yi({ref:t.timeColsRef,rootElRef:t.handleRootEl},t.slicer.sliceProps(e,a,null,i,r),{forPrint:e.forPrint,axis:e.axis,dateProfile:a,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:o.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:s,nowIndicatorSegs:n&&t.slicer.sliceNowDate(s,i,r),todayRange:c,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords}))}))},e.prototype.queryHit=function(t,e){var i=this.timeColsRef.current.positionToHit(t,e);return i?{component:this,dateSpan:i.dateSpan,dayEl:i.dayEl,rect:{left:i.relativeRect.left,right:i.relativeRect.right,top:i.relativeRect.top,bottom:i.relativeRect.bottom},layer:0}:null},e}(Mi.i);function Ji(t,e,i){for(var a=[],o=0,n=t.headerDates;o<n.length;o++){var r=n[o];a.push({start:i.add(r,e.slotMinTime),end:i.add(r,e.slotMaxTime)})}return a}var Qi=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function ta(t,e,i,a,o){for(var n=new Date(0),r=t,s=Object(Mi.fb)(0),c=i||function(t){var e,i,a;for(e=Qi.length-1;e>=0;e-=1)if(i=Object(Mi.fb)(Qi[e]),null!==(a=Object(Mi.lc)(i,t))&&a>1)return i;return t}(a),l=[];Object(Mi.T)(r)<Object(Mi.T)(e);){var d=o.add(n,r),b=null!==Object(Mi.lc)(s,c);l.push({date:d,time:r,key:d.toISOString(),isoTimeStr:Object(Mi.wb)(d),isLabeled:b}),r=Object(Mi.M)(r,a),s=Object(Mi.M)(s,a)}return l}var ea=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buildTimeColsModel=Object(Mi.Rb)(ia),e.buildSlatMetas=Object(Mi.Rb)(ta),e}return wi(e,t),e.prototype.render=function(){var t=this,e=this.context,i=e.options,a=e.dateEnv,o=this.props,n=o.dateProfile,r=this.buildTimeColsModel(n,e.dateProfileGenerator),s=this.allDaySplitter.splitProps(o),c=this.buildSlatMetas(n.slotMinTime,n.slotMaxTime,i.slotLabelInterval,i.slotDuration,a),l=i.dayMinWidth,d=!l,b=l,u=i.dayHeaders&&Object(Mi.gb)(Mi.m,{dates:r.headerDates,dateProfile:n,datesRepDistinctDays:!0,renderIntro:d?this.renderHeadAxis:null}),h=!1!==i.allDaySlot&&function(e){return Object(Mi.gb)(Si.a,yi({},s.allDay,{dateProfile:n,dayTableModel:r,nextDayThreshold:i.nextDayThreshold,tableMinWidth:e.tableMinWidth,colGroupNode:e.tableColGroupNode,renderRowIntro:d?t.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:t.headerElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:o.forPrint},t.getAllDayMaxEventProps()))},m=function(e){return Object(Mi.gb)(Zi,yi({},s.timed,{dayTableModel:r,dateProfile:n,axis:d,slotDuration:i.slotDuration,slatMetas:c,forPrint:o.forPrint,tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,onSlatCoords:t.handleSlatCoords,expandRows:e.expandRows,onScrollTopRequest:t.handleScrollTopRequest}))};return b?this.renderHScrollLayout(u,h,m,r.colCnt,l,c,this.state.slatCoords):this.renderSimpleLayout(u,h,m)},e}(Ai);function ia(t,e){var i=new Mi.n(t.renderRange,e);return new Mi.o(i,!1)}var aa={allDaySlot:Boolean},oa=Object(Mi.kb)({initialView:"timeGridWeek",optionRefiners:aa,views:{timeGrid:{component:ea,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});const na=c.a.base_url;let ra=(()=>{class t{constructor(t){this.http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}getCitas(t){return this.http.get(`${na}/citas/${t}`,this.headers).pipe(Object(_t.a)(t=>t.citas))}crearCita(t){return this.http.post(na+"/citas",t,this.headers)}actualizarCita(t,e){return this.http.put(`${na}/citas/${t}`,e,this.headers)}eliminarCita(t){return this.http.delete(`${na}/citas/${t}`,this.headers)}getCita(t){return this.http.get(`${na}/citas/getCita/${t}`,this.headers).pipe(Object(_t.a)(t=>t.cita))}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(Bt.a))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var sa=i("fz3y"),ca=i("vZMD"),la=i("IvIE");const da=c.a.socket_url,ba=c.a.clave_crypt;let ua=(()=>{class t{constructor(t,e,i,a){this.citasService=t,this.usuarioService=e,this.mensajeService=i,this.cryptoService=a,this.initialEvents=[],this.socket=l(da),this.calendarOptions={plugins:[oa],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridDay"},locale:Ni.a,initialView:"dayGridMonth",editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:this.handleDateSelect.bind(this),eventClick:this.handleEventClick.bind(this),eventsSet:this.handleEvents.bind(this),eventDrop:this.handleDrop.bind(this)},this.currentEvents=[],this.uid=this.usuarioService.uid}ngOnInit(){this.cargarCitas()}handleDateSelect(t){this.guardarCita(t)}guardarCita(t){return Object(gi.b)(this,void 0,void 0,(function*(){const e=t.view.calendar;let i;e.unselect(),i=t.startStr.length>10?t.startStr.slice(0,10)+" "+t.startStr.slice(11,16):t.startStr;const{value:a}=yield M.a.fire({title:"Fecha: "+i,input:"email",inputPlaceholder:"Ingresa el email del paciente",showCancelButton:!0,confirmButtonText:"Siguiente",cancelButtonText:"Cancelar",validationMessage:"Ingrese un email",inputValidator:t=>new Promise(e=>{this.usuarioService.getUsuarioEmail(t).subscribe(t=>{this.paciente=t,e()},t=>{e(t.error.msg)})})});if(a){const{value:a}=yield M.a.fire({title:"Paciente: "+this.paciente.nombre+" "+this.paciente.apellido,input:"text",inputPlaceholder:"Ingrese detalles del servicio",showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",validationMessage:"El detalle del servicio es requerido",inputValidator:t=>new Promise(e=>{t?(this.servicio=t,e()):e("El detalle del servicio es requerido")})});if(a){const a={titulo:this.servicio,paciente:this.paciente.uid,usuario:this.uid,fecha:t.startStr};M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.citasService.crearCita(a).subscribe(o=>{e.addEvent({id:o.cita.id,title:a.titulo,start:t.startStr,end:t.endStr,allDay:t.allDay});const n=this.cryptoService.set(ba,`Su cita se agend\xf3 para la fecha ${i} con el profesional ${this.usuarioService.usuario.nombre} ${this.usuarioService.usuario.apellido}`);this.mensajeService.enviarMensaje({de:this.usuarioService.uid,para:this.paciente.uid,mensaje:n}).subscribe(t=>{this.socket.emit("guardar-mensaje",t.mensaje)}),M.a.close()},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}}}))}handleEventClick(t){this.accederCita(t)}accederCita(t){M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.citasService.getCita(t.event.id).subscribe(e=>Object(gi.b)(this,void 0,void 0,(function*(){M.a.close(),yield M.a.fire({title:"Paciente: "+e.paciente.nombre+" "+e.paciente.apellido,html:"<b>Fecha: <b>"+e.fecha,input:"text",inputPlaceholder:"Ingrese detalles del servicio",showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",validationMessage:"El detalle del servicio es requerido",inputValue:e.titulo,showDenyButton:!0,denyButtonText:"Eliminar",inputValidator:t=>new Promise(e=>{t?(this.servicio=t,e()):e("El detalle del servicio es requerido")})}).then(i=>{i.isConfirmed?this.actualizarCita(e.id,{titulo:this.servicio},t):i.isDenied&&this.eliminarCita(t)})})),t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}actualizarCita(t,e,i){M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.citasService.actualizarCita(t,e).subscribe(t=>{if(M.a.close(),M.a.fire("Actualizada","Cita "+e.titulo+" actualizada","success"),null!==i){const e=i.view.calendar;i.event.remove(),e.addEvent({id:t.cita.id,title:t.cita.titulo,start:t.cita.fecha,end:i.event.endStr,allDay:i.event.allDay})}let a;a=t.cita.fecha.length>10?t.cita.fecha.slice(0,10)+" "+t.cita.fecha.slice(11,16):t.cita.fecha;const o=this.cryptoService.set(ba,`Su cita se re-agend\xf3 para la fecha ${a} con el profesional ${this.usuarioService.usuario.nombre} ${this.usuarioService.usuario.apellido}`);this.mensajeService.enviarMensaje({de:this.usuarioService.uid,para:t.cita.paciente,mensaje:o}).subscribe(t=>{this.socket.emit("guardar-mensaje",t.mensaje)})},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})})}eliminarCita(t){M.a.fire({title:"\xbfEsta seguro?",text:"Eliminar cita "+t.event.title,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(M.a.fire({icon:"warning",title:"Espere por favor...",allowOutsideClick:!1,onBeforeOpen:()=>{M.a.showLoading()}}),this.citasService.eliminarCita(t.event.id).subscribe(e=>{M.a.close(),M.a.fire("Eliminada","Cita "+t.event.title+" eliminada","success"),t.event.remove()},t=>{M.a.close(),M.a.fire({title:"Error!",text:t.error.msg,icon:"error",confirmButtonText:"Aceptar"})}))})}handleEvents(t){this.currentEvents=t}cargarCitas(){this.citasService.getCitas(this.uid).subscribe(t=>{t.forEach(t=>{this.initialEvents.push({id:t.id,title:t.titulo,start:t.fecha})}),this.calendarOptions.events=this.initialEvents})}handleDrop(t){this.actualizarCita(t.event.id,{titulo:t.event.title,fecha:t.event.startStr},null)}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(ra),o.Kb(n.a),o.Kb(sa.a),o.Kb(ca.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-citas"]],decls:7,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"demo-app"],[1,"demo-app-main"],[3,"options"]],template:function(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Nb(4,"div",4),o.Nb(5,"div",5),o.Lb(6,"full-calendar",6),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.zb(6),o.bc("options",e.calendarOptions))},directives:[la.a],styles:["h2[_ngcontent-%COMP%]{font-size:16px}h2[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{margin:0}ul[_ngcontent-%COMP%]{padding:0 0 0 1.5em}li[_ngcontent-%COMP%]{margin:1.5em 0;padding:0}b[_ngcontent-%COMP%]{margin-right:3px}.demo-app[_ngcontent-%COMP%]{display:flex;min-height:100%;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:14px}.demo-app-sidebar[_ngcontent-%COMP%]{width:300px;line-height:1.5;background:#eaf9ff;border-right:1px solid #d3e2e8}.demo-app-sidebar-section[_ngcontent-%COMP%]{padding:2em}.demo-app-main[_ngcontent-%COMP%]{flex-grow:1;padding:3em}.fc[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto}"]}),t})();var ha=i("ZVXz"),ma=i("qb46"),fa=i("LPYB");let pa=(()=>{class t{constructor(){this.barChartLabels=[],this.barChartData=[{data:[],label:""}],this.colors=[{backgroundColor:["#009fee","#009fee","#009fee","#009fee","#009fee","#009fee","#009fee","#009fee","#009fee","#009fee"]}],this.titulo="Sin Titulo",this.maxValueY=5,this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[ma],this.barChartOptions={responsive:!0,scales:{xAxes:[{}],yAxes:[{ticks:{min:0,max:this.maxValueY}}]},plugins:{datalabels:{anchor:"end",align:"end"}}}}ngOnInit(){this.barChartOptions={responsive:!0,scales:{xAxes:[{}],yAxes:[{ticks:{min:0,max:this.maxValueY}}]},plugins:{datalabels:{anchor:"end",align:"end"}}}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Eb({type:t,selectors:[["app-dona"]],inputs:{barChartLabels:["labels","barChartLabels"],barChartData:["data","barChartData"],colors:"colors",titulo:"titulo",maxValueY:"maxValueY"},decls:7,vars:8,consts:[[1,"card"],[1,"card-body"],[2,"display","block"],["baseChart","",3,"colors","datasets","labels","options","plugins","legend","chartType"]],template:function(t,e){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"h3"),o.nc(3),o.Mb(),o.Nb(4,"div"),o.Nb(5,"div",2),o.Lb(6,"canvas",3),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.zb(3),o.oc(e.titulo),o.zb(3),o.bc("colors",e.colors)("datasets",e.barChartData)("labels",e.barChartLabels)("options",e.barChartOptions)("plugins",e.barChartPlugins)("legend",e.barChartLegend)("chartType",e.barChartType))},directives:[fa.a],encapsulation:2}),t})();function ga(t,e){1&t&&(o.Nb(0,"div",6),o.Nb(1,"div",3),o.Nb(2,"div",7),o.Nb(3,"h4",8),o.nc(4,"Cargando..."),o.Mb(),o.Lb(5,"i",9),o.Lb(6,"p",10),o.Mb(),o.Mb(),o.Mb())}function va(t,e){if(1&t&&(o.Nb(0,"div",11),o.Nb(1,"div",3),o.Nb(2,"div",12),o.Nb(3,"h4",8),o.nc(4,"Sin resultados"),o.Mb(),o.Lb(5,"i",13),o.Lb(6,"p",10),o.Mb(),o.Mb(),o.Mb()),2&t){const t=o.Xb();o.bc("hidden",t.tests.length>0)}}function Na(t,e){if(1&t&&(o.Nb(0,"div",2),o.Nb(1,"div",3),o.Lb(2,"app-dona",14),o.Mb(),o.Mb()),2&t){const t=e.$implicit,i=o.Xb();o.bc("hidden",0==i.tests.length),o.zb(2),o.bc("maxValueY",4.5)("titulo",t.titulo)("labels",t.labels)("data",t.data)}}const Ma=[{path:"",canLoad:[r],canActivate:[r],component:v,data:{titulo:"Principal"}},{path:"noticias",canLoad:[r],canActivate:[r],component:ot,data:{titulo:"Noticias"}},{path:"noticias/:id",canActivate:[r],component:vt,data:{titulo:"Noticia"}},{path:"servicios",canLoad:[r],canActivate:[r],component:ut,data:{titulo:"Servicios"}},{path:"servicios/:id",canLoad:[r],canActivate:[r],component:Ct,data:{titulo:"Servicio"}},{path:"comunicados",canLoad:[r],canActivate:[r],component:jt,data:{titulo:"Comunicados"}},{path:"comunicados/:id",canLoad:[r],canActivate:[r],component:Ft,data:{titulo:"Comunicado"}},{path:"historias",canLoad:[r],canActivate:[r],component:Kt,data:{titulo:"Pacientes"}},{path:"historias/:id",canLoad:[r],canActivate:[r],component:ai,data:{titulo:"Historia Cl\xednica"}},{path:"seguimientos/:id",canLoad:[r],canActivate:[r],component:bi,data:{titulo:"Seguimientos"}},{path:"seguimientos/seguimiento/:id",canLoad:[r],canActivate:[r],component:pi,data:{titulo:"Seguimiento"}},{path:"citas",canLoad:[r],canActivate:[r],component:ua,data:{titulo:"Calendario de cita"}},{path:"usuarios",canLoad:[s],canActivate:[s],component:W,data:{titulo:"Usuarios"}},{path:"asignaciones",canLoad:[s],canActivate:[s],component:ae,data:{titulo:"Listado de Pacientes"}},{path:"asignaciones/:uid",canLoad:[s],canActivate:[s],component:de,data:{titulo:"Asignaci\xf3n de Profesionales"}},{path:"grafica/:id",canLoad:[s],canActivate:[s],component:(()=>{class t{constructor(t,e){this.activatedRoute=t,this.testAutoestimaService=e,this.cargando=!0,this.labels1=[],this.data1=[{data:[],label:""}],this.dataList=[{data:[],label:""}],this.testList=[],this.colors=[],this.colors1=[{backgroundColor:[]}],this.tests=[],this.labelTotal=[],this.dataTotal=[],this.labelsList=["1","2","3","4","5","6","7","8","9","10"],this.valoresList=[]}ngOnInit(){this.activatedRoute.params.subscribe(({id:t})=>{this.id=t,this.cargarDatos(t)})}cargarDatos(t){this.cargando=!0,this.testAutoestimaService.getTest(t).subscribe(t=>{this.tests=t,this.tests.forEach(t=>{const e=new Date;e.setTime(t.fecha);const i=e.toLocaleDateString();this.dataTotal.push(t.total),this.labelTotal.push(i),this.colors.push("#009fee"),this.tituloList="Puntos individuales por pregunta";const a="Fecha: "+i;this.valoresList=[Number(t.group1),Number(t.group2),Number(t.group3),Number(t.group4),Number(t.group5),Number(t.group6),Number(t.group7),Number(t.group8),Number(t.group9),Number(t.group10)],this.dataList=[{data:this.valoresList,label:this.tituloList}],this.testList.push({data:this.dataList,labels:this.labelsList,titulo:a})}),this.labels1=this.labelTotal,this.data1=[{data:this.dataTotal,label:"Sumatoria de puntos del test"}],this.colors1=[{backgroundColor:this.colors}],this.cargando=!1})}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(a.a),o.Kb(ha.a))},t.\u0275cmp=o.Eb({type:t,selectors:[["app-grafica1"]],decls:6,vars:9,consts:[["class","row animate fadeIn fast",4,"ngIf"],["class","row animate fadeIn fast",3,"hidden",4,"ngIf"],[1,"row",3,"hidden"],[1,"col-12"],[3,"colors","maxValueY","titulo","labels","data"],["class","row",3,"hidden",4,"ngFor","ngForOf"],[1,"row","animate","fadeIn","fast"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row","animate","fadeIn","fast",3,"hidden"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-warning","fa-2x"],[3,"maxValueY","titulo","labels","data"]],template:function(t,e){1&t&&(o.mc(0,ga,7,0,"div",0),o.mc(1,va,7,1,"div",1),o.Nb(2,"div",2),o.Nb(3,"div",3),o.Lb(4,"app-dona",4),o.Mb(),o.Mb(),o.mc(5,Na,3,5,"div",5)),2&t&&(o.bc("ngIf",e.cargando),o.zb(1),o.bc("ngIf",!e.cargando),o.zb(1),o.bc("hidden",0==e.tests.length),o.zb(2),o.bc("colors",e.colors1)("maxValueY",45)("titulo","Total")("labels",e.labels1)("data",e.data1),o.zb(1),o.bc("ngForOf",e.testList))},directives:[b.j,pa,b.i],encapsulation:2}),t})(),data:{titulo:"Resultados de escala de autoestima de Rosemberg"}}];let xa=(()=>{class t{}return t.\u0275mod=o.Ib({type:t}),t.\u0275inj=o.Hb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(Ma)],a.g]}),t})()},I83f:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",list:"Agenda"},weekText:"Sm",allDayText:"Todo el d\xeda",moreLinkText:"m\xe1s",noEventsText:"No hay eventos para mostrar"}},qb46:function(t,e,i){t.exports=function(t){"use strict";var e=(t=t&&t.hasOwnProperty("default")?t.default:t).helpers,i=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),a={toTextLines:function(t){var i,a=[];for(t=[].concat(t);t.length;)"string"==typeof(i=t.pop())?a.unshift.apply(a,i.split("\n")):Array.isArray(i)?t.push.apply(t,i):e.isNullOrUndef(t)||a.unshift(""+i);return a},toFontString:function(t){return!t||e.isNullOrUndef(t.size)||e.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,e,i){var a,o=[].concat(e),n=o.length,r=t.font,s=0;for(t.font=i.string,a=0;a<n;++a)s=Math.max(t.measureText(o[a]).width,s);return t.font=r,{height:n*i.lineHeight,width:s}},parseFont:function(i){var o=t.defaults.global,n=e.valueOrDefault(i.size,o.defaultFontSize),r={family:e.valueOrDefault(i.family,o.defaultFontFamily),lineHeight:e.options.toLineHeight(i.lineHeight,n),size:n,style:e.valueOrDefault(i.style,o.defaultFontStyle),weight:e.valueOrDefault(i.weight,null),string:""};return r.string=a.toFontString(r),r},bound:function(t,e,i){return Math.max(t,Math.min(e,i))},arrayDiff:function(t,e){var i,a,o,n,r=t.slice(),s=[];for(i=0,o=e.length;i<o;++i)-1===(a=r.indexOf(n=e[i]))?s.push([n,1]):r.splice(a,1);for(i=0,o=r.length;i<o;++i)s.push([r[i],-1]);return s},rasterize:function(t){return Math.round(t*i)/i}};function o(t,e){var i=e.x,a=e.y;if(null===i)return{x:0,y:-1};if(null===a)return{x:1,y:0};var o=t.x-i,n=t.y-a,r=Math.sqrt(o*o+n*n);return{x:r?o/r:0,y:r?n/r:-1}}function n(t,e,i){var a=0;return t<i.left?a|=1:t>i.right&&(a|=2),e<i.top?a|=8:e>i.bottom&&(a|=4),a}function r(t,e){var i,a,o=e.anchor,r=t;return e.clamp&&(r=function(t,e){for(var i,a,o,r=t.x0,s=t.y0,c=t.x1,l=t.y1,d=n(r,s,e),b=n(c,l,e);d|b&&!(d&b);)8&(i=d||b)?(a=r+(c-r)*(e.top-s)/(l-s),o=e.top):4&i?(a=r+(c-r)*(e.bottom-s)/(l-s),o=e.bottom):2&i?(o=s+(l-s)*(e.right-r)/(c-r),a=e.right):1&i&&(o=s+(l-s)*(e.left-r)/(c-r),a=e.left),i===d?d=n(r=a,s=o,e):b=n(c=a,l=o,e);return{x0:r,x1:c,y0:s,y1:l}}(r,e.area)),"start"===o?(i=r.x0,a=r.y0):"end"===o?(i=r.x1,a=r.y1):(i=(r.x0+r.x1)/2,a=(r.y0+r.y1)/2),function(t,e,i,a,o){switch(o){case"center":i=a=0;break;case"bottom":i=0,a=1;break;case"right":i=1,a=0;break;case"left":i=-1,a=0;break;case"top":i=0,a=-1;break;case"start":i=-i,a=-a;break;case"end":break;default:o*=Math.PI/180,i=Math.cos(o),a=Math.sin(o)}return{x:t,y:e,vx:i,vy:a}}(i,a,t.vx,t.vy,e.align)}var s=function(t,e){var i=(t.startAngle+t.endAngle)/2,a=Math.cos(i),o=Math.sin(i),n=t.innerRadius,s=t.outerRadius;return r({x0:t.x+a*n,y0:t.y+o*n,x1:t.x+a*s,y1:t.y+o*s,vx:a,vy:o},e)},c=function(t,e){var i=o(t,e.origin),a=i.x*t.radius,n=i.y*t.radius;return r({x0:t.x-a,y0:t.y-n,x1:t.x+a,y1:t.y+n,vx:i.x,vy:i.y},e)},l=function(t,e){var i=o(t,e.origin),a=t.x,n=t.y,s=0,c=0;return t.horizontal?(a=Math.min(t.x,t.base),s=Math.abs(t.base-t.x)):(n=Math.min(t.y,t.base),c=Math.abs(t.base-t.y)),r({x0:a,y0:n+c,x1:a+s,y1:n,vx:i.x,vy:i.y},e)},d=function(t,e){var i=o(t,e.origin);return r({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:i.x,vy:i.y},e)},b=t.helpers,u=a.rasterize;function h(t){var e=t._model.horizontal,i=t._scale||e&&t._xScale||t._yScale;if(!i)return null;if(void 0!==i.xCenter&&void 0!==i.yCenter)return{x:i.xCenter,y:i.yCenter};var a=i.getBasePixel();return e?{x:a,y:null}:{x:null,y:a}}function m(t,e,i){var a=t.shadowBlur,o=i.stroked,n=u(i.x),r=u(i.y),s=u(i.w);o&&t.strokeText(e,n,r,s),i.filled&&(a&&o&&(t.shadowBlur=0),t.fillText(e,n,r,s),a&&o&&(t.shadowBlur=a))}var f=function(t,e,i,a){var o=this;o._config=t,o._index=a,o._model=null,o._rects=null,o._ctx=e,o._el=i};b.extend(f.prototype,{_modelize:function(e,i,o,n){var r,u=this._index,m=b.options.resolve,f=a.parseFont(m([o.font,{}],n,u)),p=m([o.color,t.defaults.global.defaultFontColor],n,u);return{align:m([o.align,"center"],n,u),anchor:m([o.anchor,"center"],n,u),area:n.chart.chartArea,backgroundColor:m([o.backgroundColor,null],n,u),borderColor:m([o.borderColor,null],n,u),borderRadius:m([o.borderRadius,0],n,u),borderWidth:m([o.borderWidth,0],n,u),clamp:m([o.clamp,!1],n,u),clip:m([o.clip,!1],n,u),color:p,display:e,font:f,lines:i,offset:m([o.offset,0],n,u),opacity:m([o.opacity,1],n,u),origin:h(this._el),padding:b.options.toPadding(m([o.padding,0],n,u)),positioner:(r=this._el,r instanceof t.elements.Arc?s:r instanceof t.elements.Point?c:r instanceof t.elements.Rectangle?l:d),rotation:m([o.rotation,0],n,u)*(Math.PI/180),size:a.textSize(this._ctx,i,f),textAlign:m([o.textAlign,"start"],n,u),textShadowBlur:m([o.textShadowBlur,0],n,u),textShadowColor:m([o.textShadowColor,p],n,u),textStrokeColor:m([o.textStrokeColor,p],n,u),textStrokeWidth:m([o.textStrokeWidth,0],n,u)}},update:function(t){var e,i,o,n=this,r=null,s=null,c=n._index,l=n._config,d=b.options.resolve([l.display,!0],t,c);d&&(i=b.valueOrDefault(b.callback(l.formatter,[e=t.dataset.data[c],t]),e),(o=b.isNullOrUndef(i)?[]:a.toTextLines(i)).length&&(s=function(t){var e=t.borderWidth||0,i=t.padding,a=t.size.height,o=t.size.width,n=-o/2,r=-a/2;return{frame:{x:n-i.left-e,y:r-i.top-e,w:o+i.width+2*e,h:a+i.height+2*e},text:{x:n,y:r,w:o,h:a}}}(r=n._modelize(d,o,l,t)))),n._model=r,n._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var i,o=t.ctx,n=this._model,r=this._rects;this.visible()&&(o.save(),n.clip&&(i=n.area,o.beginPath(),o.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),o.clip()),o.globalAlpha=a.bound(0,n.opacity,1),o.translate(u(e.x),u(e.y)),o.rotate(n.rotation),function(t,e,i){var a=i.backgroundColor,o=i.borderColor,n=i.borderWidth;(a||o&&n)&&(t.beginPath(),b.canvas.roundedRect(t,u(e.x)+n/2,u(e.y)+n/2,u(e.w)-n,u(e.h)-n,i.borderRadius),t.closePath(),a&&(t.fillStyle=a,t.fill()),o&&n&&(t.strokeStyle=o,t.lineWidth=n,t.lineJoin="miter",t.stroke()))}(o,r.frame,n),function(t,e,i,a){var o,n=a.textAlign,r=a.color,s=!!r,c=a.font,l=e.length,d=a.textStrokeColor,b=a.textStrokeWidth,u=d&&b;if(l&&(s||u))for(i=function(t,e,i){var a=i.lineHeight,o=t.w,n=t.x;return"center"===e?n+=o/2:"end"!==e&&"right"!==e||(n+=o),{h:a,w:o,x:n,y:t.y+a/2}}(i,n,c),t.font=c.string,t.textAlign=n,t.textBaseline="middle",t.shadowBlur=a.textShadowBlur,t.shadowColor=a.textShadowColor,s&&(t.fillStyle=r),u&&(t.lineJoin="round",t.lineWidth=b,t.strokeStyle=d),o=0,l=e.length;o<l;++o)m(t,e[o],{stroked:u,filled:s,w:i.w,x:i.x,y:i.y+i.h*o})}(o,n.lines,r.text,n),o.restore())}});var p=Number.MIN_SAFE_INTEGER||-9007199254740991,g=Number.MAX_SAFE_INTEGER||9007199254740991;function v(t,e,i){var a=Math.cos(i),o=Math.sin(i),n=e.x,r=e.y;return{x:n+a*(t.x-n)-o*(t.y-r),y:r+o*(t.x-n)+a*(t.y-r)}}function N(t,e){var i,a,o,n=g,r=p,s=e.origin;for(i=0;i<t.length;++i)o=e.vx*((a=t[i]).x-s.x)+e.vy*(a.y-s.y),n=Math.min(n,o),r=Math.max(r,o);return{min:n,max:r}}function M(t,e){var i=e.x-t.x,a=e.y-t.y,o=Math.sqrt(i*i+a*a);return{vx:(e.x-t.x)/o,vy:(e.y-t.y)/o,origin:t,ln:o}}var x=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function w(t,e,i){var a=e.positioner(t,e),o=a.vx,n=a.vy;if(!o&&!n)return{x:a.x,y:a.y};var r=i.w,s=i.h,c=e.rotation,l=Math.abs(r/2*Math.cos(c))+Math.abs(s/2*Math.sin(c)),d=Math.abs(r/2*Math.sin(c))+Math.abs(s/2*Math.cos(c)),b=1/Math.max(Math.abs(o),Math.abs(n));return l*=o*b,d*=n*b,{x:a.x+(l+=e.offset*o),y:a.y+(d+=e.offset*n)}}t.helpers.extend(x.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,i){this._rotation=i,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this._rect;return!((t=v(t,this.center(),-this._rotation)).x<e.x-1||t.y<e.y-1||t.x>e.x+e.w+2||t.y>e.y+e.h+2)},intersects:function(t){var e,i,a,o=this._points(),n=t._points(),r=[M(o[0],o[1]),M(o[0],o[3])];for(this._rotation!==t._rotation&&r.push(M(n[0],n[1]),M(n[0],n[3])),e=0;e<r.length;++e)if(i=N(o,r[e]),a=N(n,r[e]),i.max<a.min||a.max<i.min)return!1;return!0},_points:function(){var t=this._rect,e=this._rotation,i=this.center();return[v({x:t.x,y:t.y},i,e),v({x:t.x+t.w,y:t.y},i,e),v({x:t.x+t.w,y:t.y+t.h},i,e),v({x:t.x,y:t.y+t.h},i,e)]}});var y={prepare:function(t){var e,i,a,o,n,r=[];for(e=0,a=t.length;e<a;++e)for(i=0,o=t[e].length;i<o;++i)r.push(n=t[e][i]),n.$layout={_box:new x,_hidable:!1,_visible:!0,_set:e,_idx:i};return r.sort((function(t,e){var i=t.$layout,a=e.$layout;return i._idx===a._idx?a._set-i._set:a._idx-i._idx})),this.update(r),r},update:function(t){var e,i,a,o,n,r=!1;for(e=0,i=t.length;e<i;++e)o=(a=t[e]).model(),(n=a.$layout)._hidable=o&&"auto"===o.display,n._visible=a.visible(),r|=n._hidable;r&&function(t){var e,i,a,o,n,r;for(e=0,i=t.length;e<i;++e)(o=(a=t[e]).$layout)._visible&&(n=a.geometry(),r=w(a._el._model,a.model(),n),o._box.update(r,n,a.rotation()));!function(t,e){var i,a,o,n;for(i=t.length-1;i>=0;--i)for(o=t[i].$layout,a=i-1;a>=0&&o._visible;--a)(n=t[a].$layout)._visible&&o._box.intersects(n._box)&&e(o,n)}(t,(function(t,e){var i=t._hidable,a=e._hidable;i&&a||a?e._visible=!1:i&&(t._visible=!1)}))}(t)},lookup:function(t,e){var i,a;for(i=t.length-1;i>=0;--i)if((a=t[i].$layout)&&a._visible&&a._box.contains(e))return t[i];return null},draw:function(t,e){var i,a,o,n,r,s;for(i=0,a=e.length;i<a;++i)(n=(o=e[i]).$layout)._visible&&(r=o.geometry(),s=w(o._el._view,o.model(),r),n._box.update(s,r,o.rotation()),o.draw(t,s))}},S=t.helpers,C=t.helpers,L="$datalabels";function O(t,e,i){if(e){var a,o=i.$context,n=i.$groups;e[n._set]&&(a=e[n._set][n._key])&&!0===C.callback(a,[o])&&(t[L]._dirty=!0,i.update(o))}}t.defaults.global.plugins.datalabels={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(S.isNullOrUndef(t))return null;var e,i,a,o=t;if(S.isObject(t))if(S.isNullOrUndef(t.label))if(S.isNullOrUndef(t.r))for(o="",a=0,i=(e=Object.keys(t)).length;a<i;++a)o+=(0!==a?", ":"")+e[a]+": "+t[e[a]];else o=t.r;else o=t.label;return""+o},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0};var I={id:"datalabels",beforeInit:function(t){t[L]={_actives:[]}},beforeUpdate:function(t){var e=t[L];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,i){var a,o,n,r,s,c,l,d,b=e.index,u=t[L],h=u._datasets[b]=[],m=t.isDatasetVisible(b),p=t.data.datasets[b],g=function(t,e){var i,a,o,n=t.datalabels,r=[];return!1===n?null:(!0===n&&(n={}),e=C.merge({},[e,n]),a=e.labels||{},o=Object.keys(a),delete e.labels,o.length?o.forEach((function(t){a[t]&&r.push(C.merge({},[e,a[t],{_key:t}]))})):r.push(e),i=r.reduce((function(t,e){return C.each(e.listeners||{},(function(i,a){t[a]=t[a]||{},t[a][e._key||"$default"]=i})),delete e.listeners,t}),{}),{labels:r,listeners:i})}(p,i),v=e.meta.data||[],N=t.ctx;for(N.save(),a=0,n=v.length;a<n;++a)if((l=v[a])[L]=[],m&&l&&!l.hidden&&!l._model.skip)for(o=0,r=g.labels.length;o<r;++o)c=(s=g.labels[o])._key,(d=new f(s,N,l,a)).$groups={_set:b,_key:c||"$default"},d.$context={active:!1,chart:t,dataIndex:a,dataset:p,datasetIndex:b},d.update(d.$context),l[L].push(d),h.push(d);N.restore(),C.merge(u._listeners,g.listeners,{merger:function(t,i,a){i[t]=i[t]||{},i[t][e.index]=a[t],u._listened=!0}})},afterUpdate:function(t,e){t[L]._labels=y.prepare(t[L]._datasets,e)},afterDatasetsDraw:function(t){y.draw(t,t[L]._labels)},beforeEvent:function(t,e){if(t[L]._listened)switch(e.type){case"mousemove":case"mouseout":!function(t,e){var i,a,o=t[L],n=o._listeners;if(n.enter||n.leave){if("mousemove"===e.type)a=y.lookup(o._labels,e);else if("mouseout"!==e.type)return;i=o._hovered,o._hovered=a,function(t,e,i,a){var o,n;(i||a)&&(i?a?i!==a&&(n=o=!0):n=!0:o=!0,n&&O(t,e.leave,i),o&&O(t,e.enter,a))}(t,n,i,a)}}(t,e);break;case"click":!function(t,e){var i=t[L],a=i._listeners.click,o=a&&y.lookup(i._labels,e);o&&O(t,a,o)}(t,e)}},afterEvent:function(e){var i,o,n,r,s,c,l,d=e[L],b=d._actives,u=d._actives=e.lastActive||[],h=a.arrayDiff(b,u);for(i=0,o=h.length;i<o;++i)if((s=h[i])[1])for(n=0,r=(l=s[0][L]||[]).length;n<r;++n)(c=l[n]).$context.active=1===s[1],c.update(c.$context);(d._dirty||h.length)&&(y.update(d._labels),function(e){if(!e.animating){for(var i=t.animationService.animations,a=0,o=i.length;a<o;++a)if(i[a].chart===e)return;e.render({duration:1,lazy:!0})}}(e)),delete d._dirty}};return t.plugins.register(I),I}(i("MO+k"))}}]);